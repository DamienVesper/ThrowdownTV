!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):(t=t||self).vastAds=e(t.videojs)}(this,function(k){"use strict";function T(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)}function E(t,e){try{return t.querySelector(e)}catch(t){return!1}}function b(t,e){if(t){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");return(void 0===t.className?window.event.srcElement:t).className.match(i)}}function S(t,e){if(t&&(t.classList.remove(e),b(t,e))){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," "),t.className.replace(/\s+/g," ")}}function _(t){var e=(t=t.toString()).split(":");return 1==e.length?parseInt(e[0]):2==e.length?60*parseInt(e[0])+parseInt(e[1]):3==e.length?3600*parseInt(e[0])+60*parseInt(e[1])+parseInt(e[2]):0}function e(h,n){function l(){function f(t){void 0!==(v=V[t]).hidebar&&k.dom.addClass(g.controlBar.el_,"vjs-abs-hidden"),V[t].used=!0,I&&g.trigger("vast.reset"),I=!0;g.vastClient({playAdAlways:!0,adTagUrl:V[t].tagURL,skipText:g.localize("Skip in %%TIME%% seconds"),skipButtonText:g.localize("Skip ad")});g.trigger("vast.firstPlay")}0<c.length&&(n=c),V=new Array;for(var t=0;t<n.length;t++){var e=n[t];if(e.tagURL){if(e.timeOffset){var i=_(e.timeOffset);(0<i||"end"==e.timeOffset)&&"end"!=e.timeOffset&&(e.timeOffset=i)}else e.timeOffset=0;e.used=!1,V.push(e)}}h.resetAd=function(){var t=g.el();g.adPlaying=!1;var e=E(t,".vjs-big-play-button");S(e,"big-play-hidden"),e.removeAttribute("style"),S(E(t,".vjs-control-bar"),"vjs-abs-hidden"),g.adPlaying=!1,S(t,"vjs-ad-loading"),S(t,"vjs-ad-playing")},h.playVast=function(r){1==C&&setTimeout(function(){if(!g.adPlaying){if(V=new Array,!Array.isArray(r)&&r.tagURL){var t=r;(r=new Array)[0]=t}for(var e=0;e<r.length;e++){var i=r[e];if(i.tagURL){if(i.timeOffset){var n=_(i.timeOffset);(0<n||"end"==i.timeOffset)&&"end"!=i.timeOffset&&(i.timeOffset=n),"end"==i.timeOOfset&&(i.timeOffset=g.duration()-.1)}else i.timeOffset=0;i.used=!1,V.push(i)}}}},100)},h.vastReset=function(){1==C&&(g.adPlaying||setTimeout(function(){if(0<V.length)for(var t=0;t<V.length;t++){var e=!1;void 0!==V[t].playAlways&&1!=V[t].playAlways&&(e=!0),1!=e&&(V[t].used=!1)}},100))},g.ready(function(){function i(){g.adPlaying&&g.trigger("adEvent",{id:v.id,type:"pause"})}function n(){g.adPlaying&&g.trigger("adEvent",{id:v.id,type:"resume"})}function t(){!function(t,e){if(t){t.length||(t=[t]);for(var i=0,n=t.length;i<n;i++)null==b(t[i],e)&&(t[i].className+=" "+e,t[i].className.replace(/\s+/g," "))}}(u,"big-play-hidden"),l=d=!1;var t=E(c,".vast-blocker");t&&(t.onclick=function(){g.trigger("adEvent",{id:v.id,type:"click"})}),g.trigger("adEvent",{id:v.id,type:"start"}),g.on("timeupdate",p),g.on("pause",i),g.on("play",n)}function r(){g.off("timeupdate",p),g.adPlaying=!1,1!=l&&(l=!0,g.trigger("adEvent",{id:v.id,type:"complete"})),g.off("pause",i),g.off("play",n),s=a=o=!1,S(u,"big-play-hidden"),u.removeAttribute("style"),S(E(c,".vjs-control-bar"),"vjs-abs-hidden");for(var t=!1,e=0;e<V.length;e++)1!=V[e].used&&(t=!0);1!=t&&1!=d&&(d=!0,g.trigger("adEvent",{id:v.id,type:"allAdsCompleted"}))}var o,a,s,d,l,c=g.el(),u=E(c,".vjs-big-play-button");g.adPlaying=!1;function p(){if(0<g.duration()&&0<g.currentTime()){var t=g.currentTime()/g.duration();.25<t&&1!=o&&(o=!0,g.trigger("adEvent",{id:v.id,type:"firstQuartile"})),.5<t&&1!=a&&(a=!0,g.trigger("adEvent",{id:v.id,type:"midpoint"})),.75<t&&1!=s&&(s=!0,g.trigger("adEvent",{id:v.id,type:"thirdQuatile"}))}}try{g.on("vast.adStart",function(){t()})}catch(t){}try{g.on("vpaid.adStart",function(){t()})}catch(t){}try{g.on("vast.adSkip",function(){g.trigger("adEvent",{id:v.id,type:"skip"})})}catch(t){}try{g.on("vpaid.adSkip",function(){g.trigger("adEvent",{id:v.id,type:"skip"})})}catch(t){}try{g.on(vast.adError,function(){g.trigger("adEvent",{id:v.id,type:"error"}),r()})}catch(t){}try{g.on(vpaid.adError,function(){g.trigger("adEvent",{id:v.id,type:"error"}),r()})}catch(t){}try{g.on("vast.adEnd",function(){r()})}catch(t){}try{g.on("vpaid.adEnd",function(){r()})}catch(t){}g.one("playing",function(){C=!0,function(){if(!g.adPlaying&&0<V.length)for(var t=0;t<V.length;t++){if(g.adPlaying)return;if(0==V[t].timeOffset&&1!=V[t].used){g.adPlaying=!0,f(t);break}}}()}),g.on("loadeddata",function(){for(var t=0;t<V.length;t++)"end"==V[t].timeOffset&&(V[t].timeOffset=g.duration()-.1)}),g.on("ended",function(){if(!g.adPlaying&&(!T(c,"vjs-ad-playing")&&1==C&&!g.adPlaying&&0<h.playlist.length))try{h.playlist.next()}catch(t){}}),g.on("timeupdate",function(){if(T(c,"vjs-ad-playing"))setTimeout(function(){1!=T(c,"vjs-ad-playing")&&r()},1e3);else if(!g.adPlaying&&1==C){var t=g.currentTime();t:for(var e=0;e<V.length;e++)if("end"!=V[e].timeOffset&&t>=V[e].timeOffset&&1!=V[e].used){f(e),g.adPlaying=!0;break t}}})})}String.prototype.dg13=function(){return this.replace(/[a-zA-Z]/g,function(t){return String.fromCharCode((t<="Z"?90:122)>=(t=t.charCodeAt(0)+13)?t:t-26)})};for(var v,t=document.location.hostname.toLowerCase(),e=window.location.hostname.toLowerCase(),i=["ig.ajbqjbeug","gfbuynpby","rupnp"],c=new Array,g=h,r=!1,o=0;o<i.length;o++){var a=i[o].dg13();a=a.split("").reverse().join(""),(0<t.indexOf(a)||0<e.indexOf(a))&&(r=!0)}if(1==r){if(!Array.isArray(n)&&n.tagURL){var s=n;(n=new Array)[0]=s}var d,u,p,f,m,y;d=n[0].tagURL,u=d,p=!0,f=2e3,m=function(){var t=this;if(4!==t.readyState||404!==t.status)if(4!==t.readyState||0!==t.status)if(4===t.readyState&&200===t.status)if(4!==t.readyState||200===t.status){try{var e=t.responseXML}catch(t){return void l()}if(e)if(e&&e.documentElement&&"VMAP"===e.documentElement.localName){var i=[];for(var n in e.documentElement.childNodes){var r=e.documentElement.childNodes[n];if("AdBreak"==r.localName){var o=A(r);i.push(o)}}if(c=new Array,0<i.length){for(var a=0;a<i.length;a++)if(null!=!i[a].adSource.uri){var s=i[a].timeOffset;"start"==s&&(s=0);var d={tagURL:i[a].adSource,id:i[a].adId,timeOffset:s};c.push(d)}l()}else l()}else l();else l()}else l();else l();else l();else l()},(y=new XMLHttpRequest).onreadystatechange=m,y.open("GET",u,!0),y.withCredentials=p,y.timeout=f,y.send()}function A(t){var e=new Object;for(var i in e.timeOffset=t.getAttribute("timeOffset"),e.breakType=t.getAttribute("breakType"),e.breakId=t.getAttribute("breakId"),e.repeatAfter=t.getAttribute("repeatAfter"),e.adSource=null,e.extensions=[],t.childNodes){var n=t.childNodes[i];switch(n.localName){case"AdSource":var r=w(n);e.adSource=r.adTagURI,e.adId=r.id}}return e}function w(t){var e=new Object;for(var i in e.id=t.getAttribute("id"),e.allowMultipleAds=t.getAttribute("allowMultipleAds"),e.followRedirects=t.getAttribute("followRedirects"),e.vastAdData=null,e.adTagURI=null,e.customData=null,t.childNodes){var n=t.childNodes[i];switch(n.localName){case"AdTagURI":e.adTagURI={templateType:n.getAttribute("templateType"),uri:(n.textContent||n.text||"").trim()},e.adTagURI=(n.textContent||n.text||"").trim();break;case"VASTAdData":for(e.vastAdData=n.firstChild;e.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case"CustomAdData":e.customData=n}}return e}}function t(t){this.ready(function(){e(this,t)})}var V=new Array,C=!1,I=!1;return((k=k&&k.hasOwnProperty("default")?k.default:k).registerPlugin||k.plugin)("vastAds",t),t}),function o(a,s,d){function l(e,t){if(!s[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(c)return c(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=s[e]={exports:{}};a[e][0].call(r.exports,function(t){return l(a[e][1][t]||t)},r,r.exports,o,a,s,d)}return s[e].exports}for(var c="function"==typeof require&&require,t=0;t<d.length;t++)l(d[t]);return l}({1:[function(t,e,i){"use strict";function n(t,e,i){}function r(t,e,i){Object.defineProperty(t,e,{writable:!1,configurable:!1,value:i})}var o=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];n.prototype.handshakeVersion=function(t,e){},n.prototype.initAd=function(t,e,i,n,r,o,a){},n.prototype.startAd=function(t){},n.prototype.stopAd=function(t){},n.prototype.skipAd=function(t){},n.prototype.resizeAd=function(t,e,i,n){},n.prototype.pauseAd=function(t){},n.prototype.resumeAd=function(t){},n.prototype.expandAd=function(t){},n.prototype.collapseAd=function(t){},n.prototype.subscribe=function(t,e,i){},n.prototype.unsubscribe=function(t,e){},n.prototype.getAdLinear=function(t){},n.prototype.getAdWidth=function(t){},n.prototype.getAdHeight=function(t){},n.prototype.getAdExpanded=function(t){},n.prototype.getAdSkippableState=function(t){},n.prototype.getAdRemainingTime=function(t){},n.prototype.getAdDuration=function(t){},n.prototype.getAdVolume=function(t){},n.prototype.getAdCompanions=function(t){},n.prototype.getAdIcons=function(t){},n.prototype.setAdVolume=function(t,e){},r(n,"METHODS",o),r(n,"GETTERS",["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"]),r(n,"SETTERS",["setAdVolume"]),r(n,"EVENTS",["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]);var a=o.filter(function(t){return-1===["skipAd"].indexOf(t)});r(n,"checkVPAIDInterface",function(e){return a.every(function(t){return"function"==typeof e[t]})}),e.exports=n},{}],2:[function(t,e,i){"use strict";function o(t,e,i,n){this._isValid=s(t),this._isValid&&(this._creative=t,this._el=e,this._videoEl=i,this._iframe=n,this._subscribers=new r,l.setFullSizeStyle(e),function(){if(u.forEach(function(t){this._creative.subscribe(function(t){this._subscribers.trigger(t,Array.prototype.slice(arguments,1))}.bind(this,t),t)}.bind(this)),this._creative.subscribe(function(t,e,i){this._subscribers.triggerSync(c,{url:t,id:e,playerHandles:i})}.bind(this),c),this._videoEl){var e=this._iframe.contentDocument.documentElement,i=this._videoEl;e.addEventListener("click",function(t){t.target===e&&i.click()})}}.call(this))}function d(t,e,i,n){t?t(i,n):i&&e.trigger("AdError",i)}var a=t("./IVPAIDAdUnit"),r=t("./subscriber"),s=a.checkVPAIDInterface,l=t("./utils"),c=(a.METHODS,"AdClickThru"),u=a.EVENTS.filter(function(t){return t!=c});(o.prototype=Object.create(a.prototype)).isValidVPAIDAd=function(){return this._isValid},a.METHODS.forEach(function(r){-1===["subscribe","unsubscribe","initAd"].indexOf(r)&&(o.prototype[r]=function(){var t=a.prototype[r].length,i=Array.prototype.slice.call(arguments),n=t===i.length?i.pop():void 0;setTimeout(function(){var t,e=null;try{t=this._creative[r].apply(this._creative,i)}catch(t){e=t}d(n,this._subscribers,e,t)}.bind(this),0)})}),o.prototype.initAd=function(t,i,n,r,o,a,s){o=o||{},a=l.extend({slot:this._el,videoSlot:this._videoEl},a||{}),setTimeout(function(){var e;try{this._creative.initAd(t,i,n,r,o,a)}catch(t){e=t}d(s,this._subscribers,e)}.bind(this),0)},o.prototype.subscribe=function(t,e,i){this._subscribers.subscribe(e,t,i)},o.prototype.unsubscribe=function(t,e){this._subscribers.unsubscribe(e,t)},o.prototype.on=o.prototype.subscribe,o.prototype.off=o.prototype.unsubscribe,a.GETTERS.forEach(function(n){o.prototype[n]=function(i){setTimeout(function(){var t,e=null;try{t=this._creative[n]()}catch(t){e=t}d(i,this._subscribers,e,t)}.bind(this),0)}}),o.prototype.setAdVolume=function(i,n){setTimeout(function(){var t,e=null;try{this._creative.setAdVolume(i),t=this._creative.getAdVolume()}catch(t){e=t}e=e||l.validate(t===i,"failed to apply volume: "+i),d(n,this._subscribers,e,t)}.bind(this),0)},o.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()},e.exports=o},{"./IVPAIDAdUnit":1,"./subscriber":4,"./utils":5}],3:[function(t,e,i){"use strict";function n(t,e,i,n){i=i||{},this._id=o(),this._destroyed=!1,this._frameContainer=c.createElementInEl(t,"div"),this._videoEl=e,this._vpaidOptions=n||{timeout:1e4},this._templateConfig={template:i.template||'<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>',extraOptions:i.extraOptions||{}}}function r(){s.call(this),function(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}.call(this)}function s(){(function(t){var e=this[t];e&&(e.remove(),delete this[t])}).call(this,"_frame"),d.call(this)}function d(){this._onLoad&&(window.removeEventListener("message",this._onLoad),c.clearCallbackTimeout(this._onLoad),delete this._onLoad)}function l(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}var c=t("./utils"),o=c.unique("vpaidIframe"),u=t("./VPAIDAdUnit");n.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,r.call(this))},n.prototype.isDestroyed=function(){return this._destroyed},n.prototype.loadAdUnit=function(t,o){(function(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}).call(this),r.call(this);var a=this,e=c.createIframeWithContent(this._frameContainer,this._templateConfig.template,c.extend({iframeURL_JS:t,iframeID:this.getID(),origin:l()},this._templateConfig.extraOptions));this._frame=e,this._onLoad=c.callbackTimeout(this._vpaidOptions.timeout,function(t){if(t.origin===l()&&JSON.parse(t.data).id===a.getID()){var e,i,n;if(!(i=a._frame.contentWindow?(n=a._frame.contentWindow.getVPAIDAd,c.validate("function"==typeof n,"the ad didn't return a function to create an ad")):"the iframe is not anymore in the DOM tree")){var r=a._frame.contentWindow.document.querySelector(".ad-element");(e=new u(n(),r,a._videoEl,a._frame)).subscribe("AdStopped",function(){s.call(this),delete this._adUnit}.bind(a)),i=c.validate(e.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return a._adUnit=e,d.call(a),o(i,i?null:e),!0}}.bind(this),function(){o("timeout",null)}.bind(this)),window.addEventListener("message",this._onLoad)},n.prototype.unloadAdUnit=function(){r.call(this)},n.prototype.getID=function(){return this._id},e.exports=n},{"./VPAIDAdUnit":2,"./utils":5}],4:[function(t,e,i){"use strict";function n(){this._subscribers={}}n.prototype.subscribe=function(t,e,i){this.isHandlerAttached(t,e)||this.get(e).push({handler:t,context:i,eventName:e})},n.prototype.unsubscribe=function(e,t){this._subscribers[t]=this.get(t).filter(function(t){return e!==t.handler})},n.prototype.unsubscribeAll=function(){this._subscribers={}},n.prototype.trigger=function(t,e){var i=this;this.get(t).concat(this.get("*")).forEach(function(t){setTimeout(function(){i.isHandlerAttached(t.handler,t.eventName)&&t.handler.call(t.context,e)},0)})},n.prototype.triggerSync=function(t,e){this.get(t).concat(this.get("*")).forEach(function(t){t.handler.call(t.context,e)})},n.prototype.get=function(t){return this._subscribers[t]||(this._subscribers[t]=[]),this._subscribers[t]},n.prototype.isHandlerAttached=function(e,t){return this.get(t).some(function(t){return e===t.handler})},e.exports=n},{}],5:[function(t,e,i){"use strict";function o(){}function a(t){var e=c[t];e&&(clearTimeout(e),delete c[t])}function r(t,e,i){var n=document.createElement("iframe");return n.src=e||"about:blank",n.marginWidth="0",n.marginHeight="0",n.frameBorder="0",n.width="100%",n.height="100%",s(n),i&&(n.style.zIndex=i),n.setAttribute("SCROLLING","NO"),t.innerHTML="",t.appendChild(n),n}function s(t){t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.margin="0px",t.style.padding="0px",t.style.border="none",t.style.width="100%",t.style.height="100%"}function d(i,n){return Object.keys(n).forEach(function(t){var e="object"==typeof e?JSON.stringify(n[t]):n[t];i=i.replace(new RegExp("{{"+t+"}}","g"),e)}),i}function l(t,e){var i=t.contentWindow&&t.contentWindow.document;return!!i&&(i.write(e),!0)}var c={};e.exports={noop:o,validate:function(t,e){return t?null:new Error(e)},clearCallbackTimeout:a,callbackTimeout:function(t,e,i){var n,r;return r=setTimeout(function(){e=o,delete r[n],i()},t),c[n=function(){e.apply(this,arguments)&&a(n)}]=r,n},createElementInEl:function(t,e,i){var n=document.createElement(e);return i&&(n.id=i),t.appendChild(n),n},createIframeWithContent:function(t,e,i){var n=r(t,null,i.zIndex);if(l(n,d(e,i)))return n},createIframe:r,setFullSizeStyle:s,simpleTemplate:d,setIframeContent:l,extend:function(e,i){return Object.keys(i).forEach(function(t){e[t]=i[t]}),e},unique:function(t){var e=-1;return function(){return t+"_"+ ++e}}}},{}],6:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.player=t,this.icons=[],this.controlBarTimer=null,this.cbHidden}var d=t("../vast/VASTError"),r=t("../../utils/async"),o=t("../../utils/playerUtils"),h=t("../../utils/utilityFunctions");n.prototype.renderIcons=function(e,i){var n=this;if(i=i||h.noop,!Array.isArray(e)||0===e.length)return i(new d("On IconIntegrator, missing required icon array"));r.waterfall([function(t){t(null,e)},this._createIcons.bind(this),this._setupEvents.bind(this),this._renderIcons.bind(this)],function(t,e){t&&e&&n._trackError(t,e),i(t,e)})},n.prototype._createIcons=function(t,e){function i(t){var e=null;if(t.staticResource){["image/gif","image/jpeg","image/png"].indexOf(t.creativeType)&&(e="<img src='"+t.staticResource+"' width='"+t.width+"' height='"+t.height+"'>")}return e}function n(t){for(var e=0;e<r.icons.length;e++)if(r.icons[e].icon.program===t)return e;return-1}for(var r=this,o=0;o<t.length;o++){var a={};a.icon=t[o];var s=n(a.icon.program);0<=s&&this.icons.splice(s,1),a.content=i(a.icon),a.content&&this.icons.push(a)}0<this.icons.length?e(null):e(new d("Could not create AdIcon content",900))},n.prototype._setupEvents=function(t){var i=this.player,n=this;return o.once(i,["vast.adEnd","vast.adsCancel","vast.adSkip","adStop"],function(){if(0<n.icons.length){n.controlBarTimer&&(clearInterval(n.controlBarTimer),n.controlBarTimer=null);for(var t=0;t<n.icons.length;t++){var e=n.icons[t];e.div&&(e.clickHandler&&e.div.removeEventListener("click",e.clickHandler),i.el().removeChild(e.div))}n.icons=[]}}),t(null)},n.prototype._renderIcons=function(){function s(t,e,i,n){for(var r=0;r<i.icons.length;r++){var o=i.icons[r];if("block"===o.div.style.display&&o.div!=t.div&&d(t.div,o.div)){if(o.div.style.top&&0<o.div.style.top.length){var a=o.origY-e;a<0&&(a=0),o.div.style.top=a+"px"}else o.div.style.bottom=o.origY+e+"px";++n<5&&s(o,e,i,n)}}}function d(t,e){function i(t,e){var i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return n.top<=i.top&&i.top<=n.bottom&&n.top<=i.bottom&&i.bottom<=n.bottom&&n.left<=i.left&&i.left<=n.right&&n.left<=i.right&&i.right<=n.right}var n,r,o;return n=e,r=t.getBoundingClientRect(),o=n.getBoundingClientRect(),!(r.top>o.bottom||r.right<o.left||r.bottom<o.top||r.left>o.right)||i(t,e)||i(e,t)}function a(t){t.forEach(function(t){(new Image).src=t})}function t(t){return function(){a(t.icon.iconClickTrackings),l.pause(),window.open(t.icon.iconClickThrough,"_blank")}}function e(r,o){var t=r.icon.offset&&0<r.icon.offset?r.icon.offset:0;setTimeout(function(){r.div.style.display="block",a(r.icon.iconViewTrackings);for(var t=0;t<c.icons.length;t++)if(c.icons[t].div&&c.icons[t].div!=r.div&&d(c.icons[t].div,r.div)){var e=c.icons[t].div.getBoundingClientRect();if("top"===o)r.div.style.top=c.icons[t].div.offsetTop+c.icons[t].div.offsetHeight+1+"px",r.origY=c.icons[t].div.offsetTop+c.icons[t].div.offsetHeight+1;else{var i=c.player.el().getBoundingClientRect();r.div.style.bottom=i.height+i.top-e.top+1+"px",r.origY=i.height+i.top-e.top+1}}if(r.icon.duration&&0<r.icon.duration){var n=r.icon.duration;setTimeout(function(){var t=c.icons.indexOf(r);0<=t&&(r.clickHandler&&r.div.removeEventListener("click",r.clickHandler),l.el().removeChild(r.div),c.icons.splice(t,1))},n)}},t)}for(var l=this.player,c=this,i=0;i<this.icons.length;i++){var n=this.icons[i],r="left",o=0,u="top",p=0;n&&"left"===n.icon.xPosition&&(r="left",o=0),n&&"right"===n.icon.xPosition&&(r="right",o=0),n&&0<=Number(n.icon.xPosition)&&(r="left",o=Number(n.xPosition)),n&&"bottom"===n.icon.yPosition&&(u="bottom",p=0,p+=0),n&&"top"===n.icon.yPosition&&(u="top",p=0,p+=0),n&&0<=Number(n.icon.yPosition)&&(u="top",p=Number(n.icon.yPosition),p+=0);var f=l.el().ownerDocument.createElement("div");l.el().appendChild(f),f.setAttribute("name","adicon"),f.id="adicon_"+n.icon.program,f.innerHTML=n.content,f.style.position="absolute",f.style[r]=o+"px",f.style[u]=p+"px",f.style.zIndex=2147483647,f.style.display="none",n.origY=p,f.style.width=n.width+"px",f.style.height=n.height+"px",n.div=f,n.icon.iconClickThrough&&(n.div.style.cursor="pointer",n.clickHandler=t(n),n.div.addEventListener("click",n.clickHandler)),e(n,u)}0<this.icons.length&&(this.controlBarTimer=setInterval(function(){var t=window.getComputedStyle(c.player.controlBar.el(),null),e="hidden"===t.backfaceVisibility||"none"!=t.transform;if(e!=c.cbHidden)for(var i=(c.cbHidden=e)?0:c.player.controlBar.el().offsetHeight,n=0;n<c.icons.length;n++){var r=c.icons[n];if(r.div&&"block"===r.div.style.display)if(0<i){if(d(r.div,c.player.controlBar.el())){if(r.div.style.top&&0<r.div.style.top.length){var o=r.origY-i;o<0&&(o=0),r.div.style.top=o+"px"}else r.div.style.bottom=r.origY+i+"px";s(r,i,c,1)}}else r.div.style.top&&0<r.div.style.top.length?r.div.style.top=r.origY+"px":r.div.style.bottom=r.origY+i+"px"}},h.isIE11()?100:500))},e.exports=n},{"../../utils/async":36,"../../utils/playerUtils":41,"../../utils/utilityFunctions":43,"../vast/VASTError":19}],7:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.initialize(t)}var r=t("./InLine"),o=t("./Wrapper");n.prototype.initialize=function(t){this.id=t.attr("id"),this.sequence=t.attr("sequence"),4===window.mol_vastVersion&&(this.conditionalAd=t.attr("conditionalAd")),t.inLine&&(this.inLine=new r(t.inLine)),t.wrapper&&(this.wrapper=new o(t.wrapper))},e.exports=n},{"./InLine":12,"./Wrapper":26}],8:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.authority=t.attr("authority"),this.category=r.keyValue(t)}var r=t("../../utils/xml"),o=t("../../utils/utilityFunctions");n.parseCategories=function(t){var i=[];return i&&(o.isArray(t)?t:[t]).forEach(function(t){var e=new n(t);e.category&&0<e.category.length&&e.authority&&0<e.authority.length&&i.push(new n(t))}),i},e.exports=n},{"../../utils/utilityFunctions":43,"../../utils/xml":44}],9:[function(t,e,i){"use strict";var a=t("./TrackingEvent"),s=t("../../utils/utilityFunctions"),d=t("../../utils/xml"),l=t("../../utils/consoleLogger");e.exports=function t(e){if(!(this instanceof t))return new t(e);l.info("<Companion> found companion ad"),l.debug("<Companion>  companionJTree:",e),this.creativeType=d.attr(e.staticResource,"creativeType"),this.staticResource=d.keyValue(e.staticResource),l.info("<Companion>  creativeType: "+this.creativeType),l.info("<Companion>  staticResource: "+this.staticResource);var i=null;d.keyValue(e.HTMLResource)?i=d.keyValue(e.HTMLResource):d.keyValue(e.hTMLResource)&&(i=d.keyValue(e.hTMLResource)),null!==i&&l.info("<Companion> found html resource",i),this.htmlResource=i;var n,r,o=null;d.keyValue(e.IFrameResource)?o=d.keyValue(e.IFrameResource):d.keyValue(e.iFrameresource)&&(o=d.keyValue(e.iFrameresource)),null!==o&&l.info("<Companion> found iframe resource",o),this.iframeResource=o,this.id=d.attr(e,"id"),this.width=d.attr(e,"width"),this.height=d.attr(e,"height"),this.assetWidth=d.attr(e,"assetWidth"),this.assetHeight=d.attr(e,"assetHeight"),this.expandedWidth=d.attr(e,"expandedWidth"),this.expandedHeight=d.attr(e,"expandedHeight"),this.apiFramework=d.attr(e,"apiFramework"),this.adSlotID=d.attr(e,"adSlotID"),this.companionClickThrough=d.keyValue(e.companionClickThrough),this.trackingEvents=(n=e.trackingEvents&&e.trackingEvents.tracking,r=[],s.isDefined(n)&&(n=s.isArray(n)?n:[n]).forEach(function(t){r.push(new a(t))}),r),4===window.mol_vastVersion&&(this.pxratio=d.attr(e,"pxratio")),l.info("<Companion>  companionClickThrough: "+this.companionClickThrough)}},{"../../utils/consoleLogger":37,"../../utils/utilityFunctions":43,"../../utils/xml":44,"./TrackingEvent":16}],10:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);if(this.id=t.attr("id"),this.sequence=t.attr("sequence"),this.adId=t.attr("adId"),this.apiFramework=t.attr("apiFramework"),t.linear&&(this.linear=new r(t.linear)),t.companionAds){var e=[],i=t.companionAds&&t.companionAds.companion;s.isDefined(i)&&(i=s.isArray(i)?i:[i]).forEach(function(t){e.push(new o(t))}),this.companionAds=e}4===window.mol_vastVersion&&(this.universalAdId=new a(t.universalAdId))}var r=t("./Linear"),o=t("./Companion"),a=t("./UniversalAdId"),s=t("../../utils/utilityFunctions");n.prototype.isSupported=function(){return!this.linear||this.linear.isSupported()},n.parseCreatives=function(t){var e=[];return s.isDefined(t)&&s.isDefined(t.creative)&&(s.isArray(t.creative)?t.creative:[t.creative]).forEach(function(t){e.push(new n(t))}),e},e.exports=n},{"../../utils/utilityFunctions":43,"./Companion":9,"./Linear":14,"./UniversalAdId":17}],11:[function(t,e,i){"use strict";var s=t("../../utils/utilityFunctions"),d=t("../../utils/xml"),l=t("./parsers"),c=["program","width","height","xPosition","yPosition","duration","offset","apiFramework","pxratio"];e.exports=function t(e){function i(t){return t?(t=s.isArray(t)?t:[t],s.transformArray(t,function(t){if(s.isNotEmptyString(t.keyValue))return t.keyValue})):[]}if(!(this instanceof t))return new t(e);for(var n=0;n<c.length;n++){var r=c[n];this[r]=e.attr(r)}this.duration&&(this.duration=l.duration(this.duration)),this.offset&&(this.offset=l.duration(this.offset)),this.creativeType=d.attr(e.staticResource,"creativeType"),this.staticResource=d.keyValue(e.staticResource);var o=null;d.keyValue(e.HTMLResource)?o=d.keyValue(e.HTMLResource):d.keyValue(e.hTMLResource)&&(o=d.keyValue(e.hTMLResource)),this.htmlResource=o;var a=null;d.keyValue(e.IFrameResource)?a=d.keyValue(e.IFrameResource):d.keyValue(e.iFrameresource)&&(a=d.keyValue(e.iFrameresource)),this.iframeResource=a,this.iconViewTrackings=i(e.iconViewTracking),e.iconClicks&&(this.iconClickThrough=d.keyValue(e.iconClicks.iconClickThrough),this.iconClickTrackings=i(e.iconClicks.iconClickTracking))}},{"../../utils/utilityFunctions":43,"../../utils/xml":44,"./parsers":27}],12:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);var e;this.adTitle=c.keyValue(t.adTitle),this.adSystem=c.keyValue(t.adSystem),this.impressions=r.parseImpressions(t.impression),this.creatives=o.parseCreatives(t.creatives),this.description=c.keyValue(t.description),this.advertiser=c.keyValue(t.advertiser),this.surveys=(e=t.survey)?l.transformArray(l.isArray(e)?e:[e],function(t){if(l.isNotEmptyString(t.keyValue))return{uri:t.keyValue,type:t.attr("type")}}):[],this.errors=r.parseErrors(t.error),this.pricing=c.keyValue(t.pricing),this.extensions=t.extensions,this.extensions&&(this.moat=function(t){if(t)return function(t){for(var e=0;e<t.length;e++){var i=t[e].extension;if(i&&i.moat){for(var n={},r=c.keyValue(i.moat).split(";"),o=0;o<r.length;o++){var a=r[o].split("=");a&&2===a.length&&(n[a[0]]=a[1])}return n}}}(l.isArray(t)?t:[t])}(this.extensions)),4===window.mol_vastVersion&&(t.category&&(this.categories=a.parseCategories(t.category)),t.viewableImpression&&(this.viewableImpression=new s(t.viewableImpression)),t.adVerifications&&(this.adVerifications=d.parseAdVerifications(t.adVerifications)))}var r=t("./vastUtil"),o=t("./Creative"),a=t("./Category"),s=t("./ViewableImpression"),d=t("./Verification"),l=t("../../utils/utilityFunctions"),c=t("../../utils/xml");n.prototype.isSupported=function(){var t,e;if(0===this.creatives.length)return!1;for(t=0,e=this.creatives.length;t<e;t+=1)if(!this.creatives[t].isSupported())return!1;return!0},e.exports=n},{"../../utils/utilityFunctions":43,"../../utils/xml":44,"./Category":8,"./Creative":10,"./Verification":23,"./ViewableImpression":25,"./vastUtil":28}],13:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.type=t.attr("type"),this.apiFramework=t.attr("apiFramework"),this.src=r.keyValue(t)}var r=t("../../utils/xml"),o=t("../../utils/utilityFunctions");n.parseInteractiveCreativeFiles=function(t){var e=[];return o.isDefined(t)&&(o.isArray(t)?t:[t]).forEach(function(t){e.push(new n(t))}),e},e.exports=n},{"../../utils/utilityFunctions":43,"../../utils/xml":44}],14:[function(t,e,i){"use strict";function d(t){if(!(this instanceof d))return new d(t);var e,i,n,r,o,a,s;this.duration=v.duration(g.keyValue(t.duration)),this.mediaFiles=(e=t.mediaFiles&&t.mediaFiles.mediaFile,i=[],h.isDefined(e)&&(e=h.isArray(e)?e:[e]).forEach(function(t){i.push(new c(t))}),i),this.trackingEvents=(n=t.trackingEvents&&t.trackingEvents.tracking,r=this.duration,o=[],h.isDefined(n)&&(n=h.isArray(n)?n:[n]).forEach(function(t){o.push(new l(t,r))}),o),this.skipoffset=v.offset(g.attr(t,"skipoffset"),this.duration),this.duration&&window._molSettings&&window._molSettings.skippable&&(window._molSettings.skippable.enabled&&this.duration>=window._molSettings.skippable.videoThreshold?this.skipoffset=window._molSettings.skippable.videoOffset:this.skipoffset=null),t.videoClicks&&(this.videoClicks=new u(t.videoClicks)),t.adParameters&&(this.adParameters=g.keyValue(t.adParameters),g.attr(t.adParameters,"xmlEncoded")&&(this.adParameters=g.decode(this.adParameters))),4===window.mol_vastVersion&&(t.mediaFiles&&t.mediaFiles.mezzanine&&(this.mezzanine=g.keyValue(t.mediaFiles.mezzanine)),t.mediaFiles&&t.mediaFiles.interactiveCreativeFile&&(this.interactiveCreativeFiles=p.parseInteractiveCreativeFiles(t.mediaFiles.interactiveCreativeFile))),t.icons&&(this.icons=(a=t.icons&&t.icons.icon,s=[],h.isDefined(a)&&(a=h.isArray(a)?a:[a]).forEach(function(t){s.push(new f(t))}),s))}var l=t("./TrackingEvent"),c=t("./MediaFile"),u=t("./VideoClicks"),p=t("./InteractiveCreativeFile"),f=t("./Icon"),h=t("../../utils/utilityFunctions"),v=t("./parsers"),g=t("../../utils/xml");d.prototype.isSupported=function(){var t,e;for(t=0,e=this.mediaFiles.length;t<e;t+=1)if(this.mediaFiles[t].isSupported())return!0;return!1},e.exports=d},{"../../utils/utilityFunctions":43,"../../utils/xml":44,"./Icon":11,"./InteractiveCreativeFile":13,"./MediaFile":15,"./TrackingEvent":16,"./VideoClicks":24,"./parsers":27}],15:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.src=r.keyValue(t);for(var e=0;e<a.length;e++){var i=a[e];this[i]=t.attr(i)}}var r=t("../../utils/xml"),o=t("./vastUtil"),a=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework"];n.prototype.isSupported=function(){return o.isVPAID(this)?!!o.findSupportedVPAIDTech(this.type):"video/x-flv"!==this.type},e.exports=n},{"../../utils/xml":44,"./vastUtil":28}],16:[function(t,e,i){"use strict";var n=t("./parsers"),r=t("../../utils/xml");e.exports=function t(e,i){if(!(this instanceof t))return new t(e,i);this.name=e.attr("event"),this.uri=r.keyValue(e),"progress"===this.name&&(this.offset=n.offset(e.attr("offset"),i))}},{"../../utils/xml":44,"./parsers":27}],17:[function(t,e,i){"use strict";e.exports=function t(e){if(!(this instanceof t))return new t(e);this.idRegistry=e.attr("idRegistry"),this.idValue=e.attr("idValue")}},{}],18:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);var e={WRAPPER_LIMIT:t&&t.wrapperLimit&&0<t.wrapperLimit?t.wrapperLimit:5};t=t||{},this.settings=f.extend({},t,e),this.errorURLMacros=[]}var c=t("./Ad"),u=t("./VASTError"),r=t("./VASTResponse"),o=t("./vastUtil"),p=t("../../utils/async"),a=t("../../utils/http").http,f=t("../../utils/utilityFunctions"),h=t("../../utils/xml"),v=t("../../utils/consoleLogger");n.prototype.getVASTResponse=function(t,e){var i,n=this,r=(i=e,t?f.isFunction(i)?void 0:new u("on VASTClient.getVASTResponse, missing callback function"):new u("on VASTClient.getVASTResponse, missing ad tag URL"));if(r){if(f.isFunction(e))return e(r);throw r}p.waterfall([this._getVASTAd.bind(this,t),function(t,e){try{e(null,n._buildVASTResponse(t))}catch(t){e(t)}}],e)},n.prototype._getVASTAd=function(t,r){function e(t,e){var i;try{i=h.toJXONTree(t),v.debug("built JXONTree from VAST response:",i),f.isArray(i.ad)?i.ads=i.ad:i.ad?i.ads=[i.ad]:i.ads=[],e(o(i),i)}catch(t){e(new u("on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml",100),null)}}function o(t){var e=h.attr(t,"version");return t.ad?e&&3!=e&&2!=e&&4!=e?new u('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version "'+e+'"',102):(window.mol_vastVersion=e,null):new u("on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree",303)}function a(e,i,n){if(i.length>=l.settings.WRAPPER_LIMIT)return n(new u("on VASTClient.getVASTAd.getAd, player's wrapper limit reached (the limit is "+l.settings.WRAPPER_LIMIT+")",302),i);p.waterfall([function(t){f.isString(e)?function(t,n){l._requestVASTXml(t,function(t,e){if(t)return n(t);try{var i=h.toJXONTree(e);n(o(i),i.ad)}catch(t){n(new u("on VASTClient.getVASTAd.requestVASTAd, error parsing xml",100))}})}(e,t):t(null,e)},s],function(t,e){return e&&i.push(e),t?n(t,i):e.wrapper?a(e.wrapper.VASTAdTagURI,i,n):n(null,i)})}function s(t,e){try{var i=new c(t);e(function(t){var e=t.wrapper,i=t.inLine,n="on VASTClient.getVASTAd.validateAd, ";if(i&&e)return new u(n+"InLine and Wrapper both found on the same Ad",101);return i||e?!i||i.isSupported()?!e||e.VASTAdTagURI?null:new u(n+"missing 'VASTAdTagURI' in wrapper",101):new u(n+"could not find MediaFile that is supported by this video player",403):new u(n+"nor wrapper nor inline elements found on the Ad",101)}(i),i)}catch(t){e(new u("on VASTClient.getVASTAd.buildAd, error parsing xml",100),null)}}var i,n,d,l=this;i=t,n=function(t,e){var n=e&&f.isArray(e.ads)?e.ads:null;if(t)return l._trackError(t,n),r(t,n);a(n.shift(),[],function t(e,i){e?(l._trackError(e,i),0<n.length?a(n.shift(),[],t):r(e,i)):r(null,i)})},d=l._requestVASTXml.bind(l,i),p.waterfall([d,e],n)},n.prototype._requestVASTXml=function(t,r){function e(t,e,i){if(t){var n=f.isDefined(i)?"on VASTClient.requestVastXML, HTTP request error with status '"+i+"'":"on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn";return r(new u(n,301),null)}r(null,e)}try{f.isFunction(t)?t(e):(v.info("requesting adTagUrl: "+t),a.get(t,e,{withCredentials:!0}))}catch(t){r(t)}},n.prototype._buildVASTResponse=function(t){var e,i=new r;return e=i,t.forEach(function(t){e.addAd(t)}),function(t){var e=t.trackingEvents.progress;if(!t.hasLinear())throw new u("on VASTClient._buildVASTResponse, Received an Ad type that is not supported",200);if(void 0===t.duration)throw new u("on VASTClient._buildVASTResponse, Missing duration field in VAST response",101);e&&e.forEach(function(t){if(!f.isNumber(t.offset))throw new u("on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event",101)})}(i),i},n.prototype._trackError=function(t,e){if(f.isArray(e)&&0!==e.length){var i=[];e.forEach(function(t){t.wrapper&&t.wrapper.errors&&Array.isArray(t.wrapper.errors)&&(i=i.concat(t.wrapper.errors)),t.inLine&&t.inLine.errors&&Array.isArray(t.inLine.errors)&&(i=i.concat(t.inLine.errors))}),o.track(i,{ERRORCODE:t.code||900})}},e.exports=n},{"../../utils/async":36,"../../utils/consoleLogger":37,"../../utils/http":39,"../../utils/utilityFunctions":43,"../../utils/xml":44,"./Ad":7,"./VASTError":19,"./VASTResponse":21,"./vastUtil":28}],19:[function(t,e,i){"use strict";function n(t,e){player.resetAd(),this.message="VAST Error: "+(t||""),e&&(this.code=e)}(n.prototype=new Error).name="VAST Error",e.exports=n},{}],20:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.player=t,this.enableFullscreenClickIFrame=!1}var r=t("./VASTResponse"),a=t("./VASTError"),o=t("./VASTTracker"),h=t("./vastUtil"),s=t("../../utils/async"),v=t("../../utils/dom"),g=t("../../utils/playerUtils"),c=t("../../utils/utilityFunctions"),d=t("../../utils/consoleLogger");n.prototype.playAd=function(e,i){var n=this;return i=i||c.noop,e instanceof r?(s.waterfall([function(t){t(null,e)},this._selectAdSource.bind(this),this._createVASTTracker.bind(this),this._addClickThrough.bind(this),this._addClickThroughDivBlocker.bind(this),this._addSkipButton.bind(this),this._setupEvents.bind(this),this._playSelectedAd.bind(this)],function(t,e){t&&e&&(window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdError",adVolume:n.player.volume()}),n._trackError(t,e)),i(t,e)}),this._adUnit={_src:null,type:"VAST",pauseAd:function(){n.player.pause(!0)},resumeAd:function(){n.player.play(!0)},isPaused:function(){return n.player.paused(!0)},getSrc:function(){return this._src}},this._adUnit):i(new a("On VASTIntegrator, missing required VASTResponse"))},n.prototype._selectAdSource=function(t,e){var i,n=v.getDimension(this.player.el()).width;if(t.mediaFiles.sort(function(t,e){return Math.abs(n-t.width)-Math.abs(n-e.width)}),(i=this.player.selectSource(t.mediaFiles).source)&&this.player.trigger({type:"trace.message",data:{message:"Playing "+i.src+" (type = "+i.type+")"}}),i)return d.info("selected source: ",i),this._adUnit&&(this._adUnit._src=i),e(null,i,t);e(new a("Could not find Ad mediafile supported by this player",403),t)},n.prototype._createVASTTracker=function(t,e,i){try{i(null,t,new o(t.src,e),e)}catch(t){i(t,e)}},n.prototype._setupEvents=function(t,i,e,n){function r(){c.isFullscreen()?i.trackFullscreen():i.trackExitFullscreen()}function o(){if(window._molSettings.breakDuration){if(window._molSettings.realVideoDuration&&Math.abs(window._molSettings.realVideoDuration-c.currentTime())<2)return}else if(Math.abs(c.duration()-c.currentTime())<2)return;window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdPaused",adVolume:c.volume()}),i.trackPause(),g.showBigPlayButton(c,!0),g.once(c,["play","vast.adEnd","vast.adsCancel"],function(t){"play"===t.type&&(window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdPlaying",adVolume:c.volume()}),i.trackResume(),g.showBigPlayButton(c,!1))})}function a(){var t=1e3*c.currentTime();i.trackProgress(t)}function s(){window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdImpression",adVolume:c.volume()}),i.trackImpressions(),i.trackCreativeView()}function d(){window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdVolumeChange",adVolume:c.volume()});var t=c.muted();t?i.trackMute():l&&i.trackUnmute(),l=t}var l,c=this.player;return c.on("fullscreenchange",r),c.on("vast.adStart",s),c.on("pause",o),c.on("timeupdate",a),c.on("volumechange",d),g.once(c,["vast.adEnd","vast.adsCancel"],function(){c.off("fullscreenchange",r),c.off("vast.adStart",s),c.off("pause",o),c.off("timeupdate",a),c.off("volumechange",d)}),g.once(c,["vast.adEnd","vast.adsCancel","vast.adSkip"],function(t){if("vast.adEnd"===t.type&&i.trackComplete(),window.MoatApiReference){var e="vast.adEnd"===t.type?"AdVideoComplete":"AdStopped";window.MoatApiReference.dispatchEvent({type:e,adVolume:c.volume()})}}),c.one("adStop",function(){c.trigger("vast.adsCancel")}),n(null,t,e)},n.prototype._addSkipButton=function(t,n,e,i){var r,o,a,s,d,l=this;c.isNumber(e.skipoffset)&&(r=e.skipoffset/1e3,o=this.player,a=r,s=function(e){var i=window.document.createElement("div");return v.addClass(i,"vast-skip-button"),i.id="adSkipButton",i.onclick=function(t){if(v.hasClass(i,"enabled")&&(window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdSkipped",adVolume:e.volume()}),n.trackSkip(),e.trigger("vast.adSkip")),g.showBigPlayButton(e,!1),void 0===window.Event.prototype.stopPropagation)return!1;t.stopPropagation()},i}(o),d=function(t,e,i){var n=Math.ceil(e-i.currentTime());0<n&&!v.hasClass(t,"enabled")?t.innerHTML='<p class="vast-skip-button-text">'+window._molSettings.skipText.replace("%%TIME%%",c.toFixedDigits(n,2))+"</p>":v.hasClass(t,"enabled")||(v.addClass(t,"enabled"),t.innerHTML=window._molSettings.skipButtonText);window.document.getElementById("iframeBackButton")||(t.style.display="block")}.bind(l,s,a,o),o.el().appendChild(s),o.on("timeupdate",d),g.once(o,["vast.adEnd","vast.adsCancel"],function(){o.off("timeupdate",d),v.remove(s)})),i(null,t,n,e)},n.prototype._addClickThrough=function(n,t,e,i){function s(t,e){var i={ASSETURI:n.src,CONTENTPLAYHEAD:h.formatProgress(1e3*e.currentTime())};return t?h.parseURLMacro(t,i):"#"}function r(){a.style.display=o.isFullscreen()?"none":"block"}var d=this.enableFullscreenClickIFrame,o=this.player,a=function(i,n,t){function e(t){if(i.paused())return i.play(),void 0!==window.Event.prototype.stopPropagation&&t.stopPropagation(),!1;i.pause(),n.trackClick(),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdClickThru",adVolume:i.volume()}),c.isIDevice()&&(setTimeout(function(){window.open(s(a,i),"_blank")},1),void 0!==window.Event.prototype.stopPropagation&&t.stopPropagation(),setTimeout(function(){i.paused()||i.pause()},500));var e=i.duration()-i.currentTime();e<3&&0<e&&setTimeout(function(){g.showBigPlayButton(i,!0),g.once(i,["playing","vast.adEnd","vast.adsCancel","vast.adSkip"],function(){g.showBigPlayButton(i,!1)})},500)}if(window._molSettings.disableClickThru){var r=window.document.createElement("div");return v.addClass(r,"vast-blocker"),r}var o=window.document.createElement("a"),a=t.clickThrough;return v.addClass(o,"vast-blocker"),c.isIDevice()||(o.href=s(a,i)),c.isString(a)&&(o.target="_blank"),c.isIDevice()?o.ontouchend=e:o.onclick=e,i.isFullscreen()&&d&&(o.style.display="none"),o}(o,t,e),l=function(t,e,i){c.isIDevice()||(t.href=s(e.clickThrough,i))}.bind(this,a,e,o);return o.el().insertBefore(a,o.controlBar.el()),o.on("timeupdate",l),g.once(o,["vast.adEnd","vast.adsCancel"],function(){o.off("timeupdate",l),o.off("fullscreenchange",r),v.remove(a)}),d&&o.on("fullscreenchange",r),i(null,n,t,e)},n.prototype._addClickThroughDivBlocker=function(n,t,e,i){function r(){if(p.style.display=u.isFullscreen()?"block":"none",!u.isFullscreen()&&l){p.removeChild(l),l=null,p.removeChild(c),c=null,g.showBigPlayButton(u,!0);var t=window.document.getElementById("adSkipButton");t&&(t.style.display="none"),u.controls(!0)}}if(!this.enableFullscreenClickIFrame)return i(null,n,t,e);var o,a,s,d,l,c,u=this.player,p=(o=u,a=t,s=window.document.createElement("div"),v.addClass(s,"vast-blocker"),window._molSettings.disableClickThru||(s.onclick=function(e){if(o.paused())return o.play(),void 0!==window.Event.prototype.stopPropagation&&e.stopPropagation(),!1;o.pause(),a.trackClick(),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdClickThru",adVolume:o.volume()}),l=window.document.createElement("iframe"),v.addClass(l,"vast-blocker"),l.src=d,s.appendChild(l),c=window.document.createElement("div"),v.addClass(c,"vast-back-button"),v.addClass(c,"enabled"),c.innerHTML="Back",c.id="iframeBackButton",s.appendChild(c),c.addEventListener("click",function(){s.removeChild(l),l=null,s.removeChild(c),c=null;var t=window.document.getElementById("adSkipButton");t&&(t.style.display="block"),o.controls(!0),void 0!==window.Event.prototype.stopPropagation&&e.stopPropagation()}),setTimeout(function(){g.showBigPlayButton(o,!1)},1);var t=window.document.getElementById("adSkipButton");t&&(t.style.display="none"),o.controls(!1)}),o.isFullscreen()||(s.style.display="none"),s),f=function(t,e,i){d=function(t,e){var i={ASSETURI:n.src,CONTENTPLAYHEAD:h.formatProgress(1e3*e.currentTime())};return t?h.parseURLMacro(t,i):"#"}(e.clickThrough,i)}.bind(this,p,e,u);return u.el().insertBefore(p,u.controlBar.el()),u.on("timeupdate",f),g.once(u,["vast.adEnd","vast.adsCancel"],function(){u.off("timeupdate",f),u.off("fullscreenchange",r),v.remove(p)}),u.on("fullscreenchange",r),i(null,n,t,e)},n.prototype._playSelectedAd=function(t,n,r){var o=this.player;o&&o.vast&&!0===o.vast.adsCancelled?r(null):(o.preload("auto"),o.src(t),d.debug("<VASTIntegrator._playSelectedAd> waiting for durationchange to play the ad..."),g.once(o,["durationchange","error","vast.adsCancel"],function(t){"durationchange"===t.type?(d.debug("<VASTIntegrator._playSelectedAd> got durationchange; calling playAd()"),g.once(o,["playing","vast.adsCancel"],function(t){function e(t){if("ended"===t.type)if(window._molSettings.breakDuration){if(window._molSettings.realVideoDuration&&3<window._molSettings.realVideoDuration-o.currentTime())return}else if(3<o.duration()-o.currentTime())return;o.off("ended",e),o.off("vast.adsCancel",e),o.off("vast.adSkip",e),"ended"!==t.type&&"vast.adSkip"!==t.type||r(null,n)}if("vast.adsCancel"!==t.type){if(d.debug("<VASTIntegrator._playSelectedAd/playAd> got playing event; triggering vast.adStart..."),o.trigger("vast.adStart"),c.isMobile())for(var i=0;i<5;i++)setTimeout(function(){o.userActive(!0)},2e3*i);window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdVideoStart",adVolume:o.volume()}),o.on("ended",e),o.on("vast.adsCancel",e),o.on("vast.adSkip",e)}}),d.debug("<VASTIntegrator._playSelectedAd/playAd> calling player.play()..."),o.play()):"error"===t.type&&r(new a("on VASTIntegrator, Player is unable to play the Ad",400),n)}))},n.prototype._trackError=function(t,e){h.track(e.errorURLMacros,{ERRORCODE:t.code||900})},e.exports=n},{"../../utils/async":36,"../../utils/consoleLogger":37,"../../utils/dom":38,"../../utils/playerUtils":41,"../../utils/utilityFunctions":43,"./VASTError":19,"./VASTResponse":21,"./VASTTracker":22,"./vastUtil":28}],21:[function(t,e,i){"use strict";function n(){if(!(this instanceof n))return new n;this._linearAdded=!1,this.vastVersion=void 0,this.ads=[],this.errorURLMacros=[],this.impressions=[],this.clickTrackings=[],this.customClicks=[],this.trackingEvents={},this.mediaFiles=[],this.clickThrough=void 0,this.adTitle="",this.duration=void 0,this.skipoffset=void 0,this.icons=[]}function r(e,t){t.forEach(function(t){t&&e.push(t)})}var o=t("./Ad"),a=t("./VideoClicks"),s=t("./Linear"),d=t("./InLine"),l=t("./Wrapper"),c=t("../../utils/utilityFunctions");window.InLine__A=d,n.prototype.addAd=function(t){var e,i;t instanceof o&&(e=t.inLine,i=t.wrapper,this.ads.push(t),e&&this._addInLine(e),i&&this._addWrapper(i))},n.prototype._addErrorTrackUrls=function(t){c.isArray(t)&&r(this.errorURLMacros,t)},n.prototype._addImpressions=function(t){c.isArray(t)&&r(this.impressions,t)},n.prototype._addClickThrough=function(t){c.isNotEmptyString(t)&&(this.clickThrough=t)},n.prototype._addClickTrackings=function(t){c.isArray(t)&&r(this.clickTrackings,t)},n.prototype._addCustomClicks=function(t){c.isArray(t)&&r(this.customClicks,t)},n.prototype._addTrackingEvents=function(t){var e=this.trackingEvents;t&&(t=c.isArray(t)?t:[t]).forEach(function(t){e[t.name]||(e[t.name]=[]),e[t.name].push(t)})},n.prototype._addTitle=function(t){c.isNotEmptyString(t)&&(this.adTitle=t)},n.prototype._addDuration=function(t){c.isNumber(t)&&(this.duration=t)},n.prototype._addVideoClicks=function(t){t instanceof a&&(this._addClickThrough(t.clickThrough),this._addClickTrackings(t.clickTrackings),this._addCustomClicks(t.customClicks))},n.prototype._addMediaFiles=function(t){c.isArray(t)&&r(this.mediaFiles,t)},n.prototype._addSkipoffset=function(t){window._molSettings&&window._molSettings.skippable?window._molSettings.skippable.enabled&&(this.duration&&window._molSettings.skippable.videoThreshold&&!(this.duration>=window._molSettings.skippable.videoThreshold)||(this.skipoffset=window._molSettings.skippable.videoOffset)):t&&(this.skipoffset=t)},n.prototype._addAdParameters=function(t){t&&(this.adParameters=t)},n.prototype._addIcons=function(t){c.isArray(t)&&r(this.icons,t)},n.prototype._addLinear=function(t){t instanceof s&&(this._addDuration(t.duration),this._addTrackingEvents(t.trackingEvents),this._addVideoClicks(t.videoClicks),this._addMediaFiles(t.mediaFiles),this._addSkipoffset(t.skipoffset),this._addAdParameters(t.adParameters),this._addIcons(t.icons),this._linearAdded=!0)},n.prototype._addInLine=function(t){var e=this;t instanceof d&&(this._addTitle(t.adTitle),this._addErrorTrackUrls(t.errors),this._addImpressions(t.impressions),t.creatives.forEach(function(t){t.linear&&e._addLinear(t.linear)}))},n.prototype._addWrapper=function(t){var i=this;t instanceof l&&(this._addErrorTrackUrls(t.errors),this._addImpressions(t.impressions),t.creatives.forEach(function(t){var e=t.linear;e&&(i._addVideoClicks(e.videoClicks),i.clickThrough=void 0,i._addTrackingEvents(e.trackingEvents),i._addIcons(e.icons))}))},n.prototype.hasLinear=function(){return this._linearAdded},e.exports=n},{"../../utils/utilityFunctions":43,"./Ad":7,"./InLine":12,"./Linear":14,"./VideoClicks":24,"./Wrapper":26}],22:[function(t,e,i){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);this.sanityCheck(t,e),this.initialize(t,e)}var r=t("./VASTError"),o=t("./VASTResponse"),a=t("./vastUtil"),h=t("../../utils/utilityFunctions");n.prototype.initialize=function(t,e){this.response=e,this.assetURI=t,this.progress=0,this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*e.duration)/100},midpoint:{tracked:!1,time:Math.round(50*e.duration)/100},thirdQuartile:{tracked:!1,time:Math.round(75*e.duration)/100}}},n.prototype.sanityCheck=function(t,e){if(!h.isString(t)||h.isEmptyString(t))throw new r("on VASTTracker constructor, missing required the URI of the ad asset being played");if(!(e instanceof o))throw new r("on VASTTracker constructor, missing required VAST response")},n.prototype.trackURLs=function(t,e){h.isArray(t)&&0<t.length&&(e=h.extend({ASSETURI:this.assetURI,CONTENTPLAYHEAD:a.formatProgress(this.progress)},e||{}),a.track(t,e))},n.prototype.trackEvent=function(t,e){var i,n;this.response.trackingEvents[t]&&window._molSettings.viewabilityTracking&&window._molSettings.viewabilityTracking.invokeEvent(t),this.trackURLs(((i=this.response.trackingEvents[t])&&(n=[],i.forEach(function(t){t.uri&&n.push(t.uri)})),n)),e&&(this.response.trackingEvents[t]=void 0)},n.prototype.trackProgress=function(t){function n(t,e,i){p[t]&&i&&c.push({name:t,trackOnce:!!e})}var e,r,i,o,a,s,d,l=this,c=[],u=!0,p=this.response.trackingEvents;function f(t,e){var i=r[t];!function(t,e){var i=t.time;return i<=e&&e<=i+5e3}(i,e)||(i.tracked=!0,n(t,u,!0))}h.isNumber(t)&&(n("start",u,0<t),n("rewind",!1,(s=this.progress,(d=t)<s&&3e3<Math.abs(d-s))),e=t,r=l.quartiles,i=l.quartiles.firstQuartile,o=l.quartiles.midpoint,a=l.quartiles.thirdQuartile,i.tracked?o.tracked?a.tracked||f("thirdQuartile",e):f("midpoint",e):f("firstQuartile",e),function(e){if(h.isArray(p.progress)){var i=[];p.progress.forEach(function(t){t.offset<=e?l.trackURLs([t.uri]):i.push(t)}),p.progress=i}}(t),c.forEach(function(t){l.trackEvent(t.name,t.trackOnce)}),this.progress=t)},["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(t){n.prototype["track"+h.capitalize(t)]=function(){this.trackEvent(t)}}),["start","skip","close","closeLinear"].forEach(function(t){n.prototype["track"+h.capitalize(t)]=function(){this.trackEvent(t,!0)}}),["firstQuartile","midpoint","thirdQuartile"].forEach(function(t){n.prototype["track"+h.capitalize(t)]=function(){this.quartiles[t].tracked=!0,this.trackEvent(t,!0)}}),n.prototype.trackComplete=function(){this.quartiles.thirdQuartile.tracked&&this.trackEvent("complete",!0)},n.prototype.trackErrorWithCode=function(t){h.isNumber(t)&&this.trackURLs(this.response.errorURLMacros,{ERRORCODE:t})},n.prototype.trackImpressions=function(){this.trackURLs(this.response.impressions)},n.prototype.trackCreativeView=function(){this.trackEvent("creativeView")},n.prototype.trackClick=function(){window._molSettings.viewabilityTracking&&window._molSettings.viewabilityTracking.invokeEvent("ad-click"),this.trackURLs(this.response.clickTrackings)},e.exports=n},{"../../utils/utilityFunctions":43,"./VASTError":19,"./VASTResponse":21,"./vastUtil":28}],23:[function(t,e,i){"use strict";function n(t){function e(t){var e=[];return t&&(a.isArray(t)?t:[t]).forEach(function(t){e.push({apiFramework:t.attr("apiFramework"),uri:r.keyValue(t)})}),e}if(!(this instanceof n))return new n(t);this.vendor=t.attr("vendor"),t.javaScriptResource&&(this.javaScriptResources=e(t.javaScriptResource)),o.isFlashSupported()&&t.flashResource&&(this.javaScriptResources=e(t.javaScriptResource)),t.viewableImpression&&(this.viewableImpression={id:t.viewableImpression.attr("id"),uri:r.keyValue(t.viewableImpression)})}var r=t("../../utils/xml"),o=t("./vastUtil"),a=t("../../utils/utilityFunctions");n.parseAdVerifications=function(t){var e=[];return a.isDefined(t)&&a.isDefined(t.verification)&&(a.isArray(t.verification)?t.verification:[t.verification]).forEach(function(t){e.push(new n(t))}),e},e.exports=n},{"../../utils/utilityFunctions":43,"../../utils/xml":44,"./vastUtil":28}],24:[function(t,e,i){"use strict";var n=t("../../utils/utilityFunctions"),r=t("../../utils/xml");e.exports=function t(e){function i(t){var e=[];return t&&(t=n.isArray(t)?t:[t]).forEach(function(t){e.push(r.keyValue(t))}),e}if(!(this instanceof t))return new t(e);this.clickThrough=r.keyValue(e.clickThrough),this.clickTrackings=i(e.clickTracking),this.customClicks=i(e.customClick)}},{"../../utils/utilityFunctions":43,"../../utils/xml":44}],25:[function(t,e,i){"use strict";var n=t("../../utils/xml"),r=t("../../utils/utilityFunctions");e.exports=function t(e){function i(t){var e=[];return t&&(r.isArray(t)?t:[t]).forEach(function(t){e.push(n.keyValue(t))}),e}if(!(this instanceof t))return new t(e);this.id=e.attr("id"),e.viewable&&(this.viewables=i(e.viewable)),e.notViewable&&(this.notViewables=i(e.notViewable)),e.viewUndetermined&&(this.viewUndetermineds=i(e.viewUndetermined))}},{"../../utils/utilityFunctions":43,"../../utils/xml":44}],26:[function(t,e,i){"use strict";var n=t("./vastUtil"),r=t("./Creative"),o=t("./ViewableImpression"),a=t("./Verification"),s=t("../../utils/utilityFunctions"),d=t("../../utils/xml");e.exports=function t(e){if(!(this instanceof t))return new t(e);this.adSystem=d.keyValue(e.adSystem),this.impressions=n.parseImpressions(e.impression),this.VASTAdTagURI=d.keyValue(e.vASTAdTagURI),this.creatives=r.parseCreatives(e.creatives),this.errors=n.parseErrors(e.error),this.extensions=e.extensions,this.followAdditionalWrappers=!s.isDefined(d.attr(e,"followAdditionalWrappers"))||d.attr(e,"followAdditionalWrappers"),this.allowMultipleAds=d.attr(e,"allowMultipleAds"),this.fallbackOnNoAd=d.attr(e,"fallbackOnNoAd"),4===window.mol_vastVersion&&(e.viewableImpression&&(this.viewableImpression=new o(e.viewableImpression)),e.adVerifications&&(this.adVerifications=a.parseAdVerifications(e.adVerifications)))}},{"../../utils/utilityFunctions":43,"../../utils/xml":44,"./Creative":10,"./Verification":23,"./ViewableImpression":25,"./vastUtil":28}],27:[function(t,e,i){"use strict";var a=t("../../utils/utilityFunctions"),s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,d={duration:function(t){var e,i,n,r,o;return a.isString(t)&&(e=t.match(s))&&(o=e[1],i=60*parseInt(o,10)*60*1e3+(r=e[2],60*parseInt(r,10)*1e3)+(n=e[3],1e3*parseInt(n,10))+parseInt(e[5]||0)),isNaN(i)?null:i},offset:function(t,e){return/^\d+(\.\d+)?%$/g.test(t)?(r=t,(o=e)?(i=o,n=parseFloat(r.replace("%","")),i*n/100):null):d.duration(t);var i,n,r,o}};e.exports=d},{"../../utils/utilityFunctions":43}],28:[function(t,e,i){"use strict";var a=t("../../utils/utilityFunctions"),s={track:function(t,e){var i=s.parseURLMacros(t,e),n=[];return i.forEach(function(t){var e=new Image;e.src=t,n.push(e)}),n},parseURLMacros:function(t,e){var i=[];return(e=e||{}).CACHEBUSTING||(e.CACHEBUSTING=Math.round(1e10*Math.random())),t.forEach(function(t){i.push(s._parseURLMacro(t,e))}),i},parseURLMacro:function(t,e){return(e=e||{}).CACHEBUSTING||(e.CACHEBUSTING=Math.round(1e10*Math.random())),s._parseURLMacro(t,e)},_parseURLMacro:function(i,t){return t=t||{},a.forEach(t,function(t,e){i=i.replace(new RegExp("\\["+e+"\\]","gm"),t)}),i},parseDuration:function(t){var e,i,n,r,o;return a.isString(t)&&(e=t.match(/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/))&&(o=e[1],i=60*parseInt(o,10)*60*1e3+(r=e[2],60*parseInt(r,10)*1e3)+(n=e[3],1e3*parseInt(n,10))+parseInt(e[5]||0)),isNaN(i)?null:i},parseImpressions:function(t){return t?(t=a.isArray(t)?t:[t],a.transformArray(t,function(t){if(a.isNotEmptyString(t.keyValue))return t.keyValue})):[]},parseErrors:function(t){return t?(t=a.isArray(t)?t:[t],a.transformArray(t,function(t){if(a.isNotEmptyString(t.keyValue))return t.keyValue})):[]},formatProgress:function(t){var e,i,n,r;return e=t/36e5,e=Math.floor(e),i=t/6e4%60,i=Math.floor(i),n=t/1e3%60,n=Math.floor(n),r=t%1e3,a.toFixedDigits(e,2)+":"+a.toFixedDigits(i,2)+":"+a.toFixedDigits(n,2)+"."+a.toFixedDigits(r,3)},parseOffset:function(t,e){return/^\d+(\.\d+)?%$/g.test(t)?(r=t,(o=e)?(i=o,n=parseFloat(r.replace("%","")),i*n/100):null):s.parseDuration(t);var i,n,r,o},VPAID_techs:[t("../vpaid/VPAIDHTML5Tech")],isVPAID:function(t){return!!t&&"VPAID"===t.apiFramework},findSupportedVPAIDTech:function(t){var e,i,n;for(e=0,i=this.VPAID_techs.length;e<i;e+=1)if((n=this.VPAID_techs[e]).supports(t))return n;return null},isFlashSupported:function(){return!1}};e.exports=s},{"../../utils/utilityFunctions":43,"../vpaid/VPAIDHTML5Tech":30}],29:[function(t,e,i){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);!function(t,e){if(!t||!n.checkVPAIDInterface(t))throw new s("on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface");if(!d.isObject(e))throw new s("on VPAIDAdUnitWrapper, expected options hash  but got '"+e+"'");if(!("responseTimeout"in e&&d.isNumber(e.responseTimeout)))throw new s("on VPAIDAdUnitWrapper, expected responseTimeout in options")}(t,e),this.options=d.extend({},e),this.adStarted=!1,this._adUnit=t}var s=t("../vast/VASTError"),d=t("../../utils/utilityFunctions"),a=t("../../utils/consoleLogger");n.checkVPAIDInterface=function(t){for(var e,i,n=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"],r=0,o=n.length;r<o;r++)if(!t||!d.isFunction(t[n[r]]))return!1;return i=t,(d.isFunction(i.subscribe)||d.isFunction(i.addEventListener)||d.isFunction(i.on))&&(e=t,d.isFunction(e.unsubscribe)||d.isFunction(e.removeEventListener)||d.isFunction(e.off))},n.prototype.adUnitAsyncCall=function(){var t,e=d.arrayLikeObjToArray(arguments),i=e.shift(),n=e.pop();!function(t,e,i){if(!d.isString(t)||!d.isFunction(i[t]))throw new s("on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name");if(!d.isFunction(e))throw new s("on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback")}(i,n,this._adUnit),e.push(function(){t&&clearTimeout(t),n.apply(this,arguments)}),this._adUnit[i].apply(this._adUnit,e),t=setTimeout(function(){t=null,n(new s("on VPAIDAdUnitWrapper, timeout while waiting for a response on call '"+i+"'")),n=d.noop},this.options.responseTimeout)},n.prototype.on=function(t,e){(this._adUnit.addEventListener||this._adUnit.subscribe||this._adUnit.on).call(this._adUnit,t,e)},n.prototype.off=function(t,e){(this._adUnit.removeEventListener||this._adUnit.unsubscribe||this._adUnit.off).call(this._adUnit,t,e)},n.prototype.waitForEvent=function(e,i,n){function r(){a.options&&a.options.player&&a.options.player.trigger({type:"trace.event",data:{event:e}}),a.off(e,r);var t=d.arrayLikeObjToArray(arguments);o&&(clearTimeout(o),o=null),t.unshift(null),i.apply(n,t)}var o,a=this;!function(t,e){if(!d.isString(t))throw new s("on VPAIDAdUnitWrapper.waitForEvent, missing evt name");if(!d.isFunction(e))throw new s("on VPAIDAdUnitWrapper.waitForEvent, missing callback")}(e,i),n=n||null,this.on(e,r),o=setTimeout(function(){a.off(e,r),0<=window._timeoutIds.indexOf(o)&&(a.options&&a.options.player&&a.options.player.trigger({type:"trace.message",data:{message:"Timeout while waiting for event "+e}}),i(new s("on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '"+e+"'. You may need to increase adStartTimeout."))),o=null,i=d.noop},this.options.responseTimeout),window._timeoutIds.push(o)},n.prototype.handshakeVersion=function(t,e){this.adUnitAsyncCall("handshakeVersion",t,e)},n.prototype.initAd=function(t,e,i,n,r,o){a.log("VPAIDAdUnitWrapper->Calling initAd on creative"),this.waitForEvent("AdLoaded",o),this._adUnit.initAd(t,e,i,n,r)},n.prototype.resizeAd=function(t,e,i,n){a.log("VPAIDAdUnitWrapper->Calling resizeAd on creative"),this.adUnitAsyncCall("resizeAd",t,e,i,n),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdSizeChange",adVolume:this.options.player.volume()})},n.prototype.startAd=function(t){a.log("VPAIDAdUnitWrapper->Calling startAd on creative"),this.adStarted||this.waitForEvent("AdStarted",t),this._adUnit.startAd(),this.adStarted&&t(null)},n.prototype.stopAd=function(t){a.log("VPAIDAdUnitWrapper->Calling stopAd on creative"),this.waitForEvent("AdStopped",t),this._adUnit.stopAd()},n.prototype.pauseAd=function(t){a.log("VPAIDAdUnitWrapper->Calling pauseAd on creative"),this.waitForEvent("AdPaused",t),this._adUnit.pauseAd()},n.prototype.resumeAd=function(t){a.log("VPAIDAdUnitWrapper->Calling resumeAd on creative"),this.waitForEvent("AdPlaying",t),this._adUnit.resumeAd()},n.prototype.expandAd=function(t){a.log("VPAIDAdUnitWrapper->Calling expandAd on creative"),this.waitForEvent("AdExpandedChange",t),this._adUnit.expandAd()},n.prototype.collapseAd=function(t){a.log("VPAIDAdUnitWrapper->Calling collapseAd on creative"),this.waitForEvent("AdExpandedChange",t),this._adUnit.collapseAd()},n.prototype.skipAd=function(t){a.log("VPAIDAdUnitWrapper->Calling skipAd on creative"),this.waitForEvent("AdSkipped",t),this._adUnit.skipAd()},["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(t){var e="get"+d.capitalize(t);n.prototype[e]=function(t){this.adUnitAsyncCall(e,t)}}),n.prototype.setAdVolume=function(t,e){this.adUnitAsyncCall("setAdVolume",t,e)},e.exports=n},{"../../utils/consoleLogger":37,"../../utils/utilityFunctions":43,"../vast/VASTError":19}],30:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);!function(t){if(!t||!s.isString(t.src))throw new o(n.INVALID_MEDIA_FILE)}(t),this.name="vpaid-html5",this.containerEl=null,this.videoEl=null,this.vpaidHTMLClient=null,this.mediaFile=t}var r=t("../../utils/mimetypes"),o=t("../vast/VASTError"),a=t("VPAIDHTML5Client/js/VPAIDHTML5Client"),s=t("../../utils/utilityFunctions"),d=t("../../utils/dom"),l=t("../../utils/consoleLogger");n.VPAIDHTML5Client=a,n.supports=function(t){return!s.isOldIE()&&-1<r.html5.indexOf(t)},n.prototype.loadAdUnit=function(t,e,i){!function(t,e,i){if(!d.isDomElement(t))throw new o(n.INVALID_DOM_CONTAINER_EL);if(!d.isDomElement(e)||"video"!==e.tagName.toLowerCase())throw new o(n.INVALID_DOM_CONTAINER_EL);if(!s.isFunction(i))throw new o(n.MISSING_CALLBACK)}(t,e,i),this.containerEl=t,this.videoEl=e,this.vpaidHTMLClient=new n.VPAIDHTML5Client(t,e,{}),this.vpaidHTMLClient._id="vpaidIframe_"+Date.now(),this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src,i)},n.prototype.unloadAdUnit=function(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(t){l.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidHTMLClient=null}this.containerEl&&(d.remove(this.containerEl),this.containerEl=null)};var c="on VPAIDHTML5Tech";n.INVALID_MEDIA_FILE=c+", invalid MediaFile",n.INVALID_DOM_CONTAINER_EL=c+", invalid container HtmlElement",n.INVALID_DOM_VIDEO_EL=c+", invalid HTMLVideoElement",n.MISSING_CALLBACK=c+", missing valid callback",e.exports=n},{"../../utils/consoleLogger":37,"../../utils/dom":38,"../../utils/mimetypes":40,"../../utils/utilityFunctions":43,"../vast/VASTError":19,"VPAIDHTML5Client/js/VPAIDHTML5Client":3}],31:[function(t,e,i){"use strict";function n(t,e){if(!(this instanceof n))return new n(t);var i;this.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"},this.player=t,this.containerEl=((i=document.createElement("div")).id="BC-VPAID-container",k.addClass(i,"VPAID-container"),t.el().insertBefore(i,t.controlBar.el()),i),this.options={responseTimeout:5e3,VPAID_VERSION:"2.0"},this.settings=e,this.contentSource=t.tech_.el_.src,this.needsShowPlayer=!1,this.errorHasBeenTracked=!1,this.adFinished=!1,this.timeUpdateTimer=null}function y(t,e){for(var i=t.controlBar.getChild("currentTimeDisplay").el_.children,n=0;n<i.length;n++)"bc_time_display"!=i[n].id&&(i[n].style.display=e?"":"none")}function A(t,e,i){var n=document.getElementById("adSkipButton"),r=t.el().querySelector(".vjs-tech"),o=k.getDimension(r),a=t.isFullscreen()?i.FULLSCREEN:i.NORMAL;a===i.NORMAL&&(t.vast&&(t.vast.needSyncPlay=!0),o.width=t.el_.offsetWidth,o.height=t.el_.offsetHeight,E.isAndroid()&&n&&(n.style.display="block")),a===i.FULLSCREEN&&(d.log("****** to fullscreen dimension = "+o.width+","+o.height),E.isAndroid()&&n&&(n.style.display="none")),e.resizeAd(o.width,o.height,a,u)}function u(t){t&&d.error("ERROR: "+t.message,t)}var c=t("../../utils/mimetypes"),l=t("../vast/VASTError"),p=t("../vast/VASTResponse"),r=t("../vast/VASTTracker"),w=t("../vast/vastUtil"),o=t("./VPAIDAdUnitWrapper"),s=t("../../utils/async"),k=t("../../utils/dom"),T=t("../../utils/playerUtils"),E=t("../../utils/utilityFunctions"),d=t("../../utils/consoleLogger");n.prototype.playAd=function(e,n){function t(t,e,i){t&&i&&r._trackError(i,t.code),o.trigger("vpaid.adEnd"),n(t,i)}function i(){o.trigger("vpaid.adEnd")}if(!(e instanceof p))return n(new l("on VASTIntegrator.playAd, missing required VASTResponse"));var r=this,o=this.player;d.debug("<VPAIDIntegrator.playAd> looking for supported tech...");var a=this._findSupportedTech(e,this.settings);(n=n||E.noop,this._adUnit=null,k.addClass(o.el(),"vjs-vpaid-ad"),o.on("vast.adsCancel",i),o.one("vpaid.adEnd",function(){o.off("vast.adsCancel",i),a&&(d.log("VPAIDIntegrator->Calling unloadAdUnit (implicitly invokes stopAd and unsubscribes VPAID events)"),a.unloadAdUnit()),k.removeClass(o.el(),"vjs-vpaid-ad")}),a)?(d.info("<VPAIDIntegrator.playAd> found tech: ",a),s.waterfall([function(t){t(null,a,e)},this._loadAdUnit.bind(this),this._playAdUnit.bind(this),this._finishPlaying.bind(this)],t),this._adUnit={_paused:!0,type:"VPAID",pauseAd:function(){o.trigger("vpaid.pauseAd"),o.pause(!0)},resumeAd:function(){o.trigger("vpaid.resumeAd")},isPaused:function(){return this._paused},getSrc:function(){return a.mediaFile}}):(d.debug("<VPAIDIntegrator.playAd> could not find suitable tech"),t(new l("on VPAIDIntegrator.playAd, could not find a supported mediaFile",403),this._adUnit,e));return this._adUnit},n.prototype._findSupportedTech=function(t,e){if(!(t instanceof p))return null;var i,n,r,o,a=t.mediaFiles.filter(w.isVPAID),s=e&&e.preferredTech,d=[];for(i=0,n=a.length;i<n;i+=1)if(r=a[i],o=w.findSupportedVPAIDTech(r.type)){if(!!s&&(r.type===s||c[s]&&-1<c[s].indexOf(r.type)))return new o(r,e);d.push({mediaFile:r,tech:o})}if(d.length){var l=d[0];return new l.tech(l.mediaFile,e)}return null},n.prototype._createVPAIDAdUnitWrapper=function(t,e,i,n){return new o(t,{src:e,responseTimeout:i,player:n})},n.prototype._loadAdUnit=function(o,a,s){var d=this,l=this.player,t=l.el().querySelector(".vjs-tech"),c=this.settings.adCancelTimeout||this.options.responseTimeout;o.loadAdUnit(this.containerEl,t,function(t,e){if(t)return s(t,e,a);try{var i=document.getElementsByTagName("IFRAME");i&&0<i.length&&i[0].addEventListener("mouseover",function(){l.userActive(!0),k.hasClass(l.el(),"vjs-has-started")||k.addClass(l.el(),"vjs-has-started")}),l.trigger({type:"trace.message",data:{message:"Playing "+o.mediaFile.src+" (type = "+o.mediaFile.type+", apiFramework = "+o.mediaFile.apiFramework+")"}});var n=d._createVPAIDAdUnitWrapper(e,o.mediaFile.src,c,l),r="vjs-"+o.name+"-ad";k.addClass(l.el(),r),l.one("vpaid.adEnd",function(){k.removeClass(l.el(),r)}),s(null,n,a)}catch(t){s(t,e,a)}});window.parent.addEventListener("message",function(t){window.postMessage(t.data,window.location.origin)})},n.prototype._playAdUnit=function(e,i,t){s.waterfall([function(t){t(null,e,i)},this._handshake.bind(this),this._setupEvents.bind(this),this._initAd.bind(this),this._addSkipButton.bind(this),this._linkPlayerControls.bind(this),this._startAd.bind(this)],t)},n.prototype._handshake=function(i,n,r){function o(t){var e=function(t){var e=t.split(".");return parseInt(e[0],10)}(t);return 1<=e&&e<=2}i.handshakeVersion(this.options.VPAID_VERSION,function(t,e){return t?r(t,i,n):e&&o(e)?r(null,i,n):r(new l('on VPAIDIntegrator._handshake, unsupported version "'+e+'"'),i,n)})},n.prototype._initAd=function(e,i,n){var t=this.player.el().querySelector(".vjs-tech"),r=k.getDimension(t);e.initAd(r.width,r.height,this.VIEW_MODE.NORMAL,-1,{AdParameters:i.adParameters||""},function(t){n(t,e,i)})},n.prototype._createVASTTracker=function(t,e){return new r(t,e)},n.prototype._setupEvents=function(a,s,t){function i(){h.impressionTriggered||(h.impressionTriggered=!0,window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdImpression",adVolume:p.volume()}),p.trigger({type:"trace.event",data:{event:"vpaid.AdImpression"}}),p.trigger("vpaid.AdImpression"),u.trackImpressions())}function e(){var n=document.getElementById("bc_time_display");n?(y(p,!1),n.style.display="block"):(n=document.createElement("div"),p.controlBar.getChild("currentTimeDisplay").el_.appendChild(n),n.id="bc_time_display",n.class="vjs-current-time-display",n["aria-live"]="off",n.innerHTML='<span class="vjs-control-text"></span>0:00',y(p,!1)),a.getAdRemainingTime(function(t,e){if(0<=e){var i=p.duration()-e;0<=i&&(n.childNodes[1].nodeValue=function(t){var e=parseInt(t+.5),i=parseInt(e/60);return e-=60*i,i.toString()+":"+(9<e?"":"0")+e.toString()}(i))}})}function n(){h._adUnit&&h._adUnit.isPaused()&&(h._adUnit._paused=!1),p.trigger("play")}function r(){h._adUnit&&(h._adUnit._paused=!0),p.trigger("pause")}function o(){a.pauseAd(E.noop)}function d(){a.resumeAd(E.noop)}function l(){a.stopAd&&a.stopAd(E.noop)}var c=a.options.src,u=this._createVASTTracker(c,s),p=this.player,f=this.contentSource,h=this;this.tracker=u,this.impressionTriggered=!1,a.on("AdSkipped",function(){p.trigger({type:"trace.event",data:{event:"vpaid.AdSkipped"}}),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdSkipped",adVolume:p.volume()}),p.trigger("vpaid.AdSkipped"),u.trackSkip(),T.showBigPlayButton(p,!1),a.stopAd(E.noop),setTimeout(function(){p.trigger("vast.adsCancel")},300)}),a.on("AdImpression",function(){i()}),a.on("AdStarted",function(){if(!a.adStarted&&(window._molSettings.viewabilityTracking&&window._molSettings.viewabilityTracking.init(window._molSettings.viewability.contextId,p.duration(),p.el_.offsetWidth,p.el_.offsetHeight),a.adStarted=!0,k.hasClass(p.el(),"vjs-has-started")||k.addClass(p.el(),"vjs-has-started"),p.trigger("vpaid.AdStarted"),u.trackCreativeView(),!window._molSettings.playsInBreak&&a.getAdDuration&&a.getAdDuration(function(t,e){0<e&&p.duration(e)}),i(),n(),p.one("adStop",function(){a.stopAd&&a.stopAd(E.noop)}),E.isIDevice())){var t=document.getElementsByClassName("vjs-resize-manager");if(t&&0<t.length){var e=t[0].parentElement;e&&e.removeChild(t[0])}}}),a.on("AdVideoStart",function(){if(p.trigger({type:"trace.event",data:{event:"AdVideoStart"}}),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdVideoStart",adVolume:p.volume()}),p.trigger("vpaid.AdVideoStart"),u.trackStart(),!window._molSettings.playsInBreak&&a.getAdDuration&&a.getAdDuration(function(t,e){0<e&&p.duration(e)}),n(),T.showBigPlayButton(p,!1),E.isMobile())for(var t=0;t<4;t++)setTimeout(function(){p.userActive(!0)},1e3*t);f===p.tech_.el_.src&&(p.trigger({type:"trace.message",data:{message:"VPAID creative uses its own video tag"}}),h.needsShowPlayer=!0,window._molSettings.playsInBreak?p.controlBar.hide():h.timeUpdateTimer=setInterval(e,500))}),a.on("AdPlaying",function(){h.adFinished||(window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdPlaying",adVolume:p.volume()}),p.trigger("vpaid.AdPlaying"),u.trackResume(),n(),T.showBigPlayButton(p,!1))}),a.on("AdPaused",function(){h.adFinished||(window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdPaused",adVolume:p.volume()}),p.trigger("vpaid.AdPaused"),u.trackPause(),r(),window.document.getElementById("iframeBackButton")?T.showBigPlayButton(p,!1):T.showBigPlayButton(p,!0))}),a.on("AdVideoFirstQuartile",function(){h.adFinished||(p.trigger({type:"trace.event",data:{event:"vpaid.AdVideoFirstQuartile"}}),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdVideoFirstQuartile",adVolume:p.volume()}),p.trigger("vpaid.AdVideoFirstQuartile"),u.trackFirstQuartile())}),a.on("AdVideoMidpoint",function(){h.adFinished||(p.trigger({type:"trace.event",data:{event:"vpaid.AdVideoMidpoint"}}),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdVideoMidpoint",adVolume:p.volume()}),p.trigger("vpaid.AdVideoMidpoint"),u.trackMidpoint())}),a.on("AdVideoThirdQuartile",function(){h.adFinished||(p.trigger({type:"trace.event",data:{event:"vpaid.AdVideoThirdQuartile"}}),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdVideoThirdQuartile",adVolume:p.volume()}),p.trigger("vpaid.AdVideoThirdQuartile"),u.trackThirdQuartile())}),a.on("AdVideoComplete",function(){h.adFinished||(p.trigger({type:"trace.event",data:{event:"vpaid.AdVideoComplete"}}),p.trigger("vpaid.AdVideoComplete"),u.trackComplete(),T.showBigPlayButton(p,!1),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdVideoComplete",adVolume:p.volume()}),a.stopAd&&a.stopAd(E.noop))}),a.on("AdClickThru",function(t){if(!h.adFinished){p.trigger({type:"trace.event",data:{event:"vpaid.AdClickThru"}}),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdClickThru",adVolume:p.volume()}),p.trigger("vpaid.AdClickThru");var e,i,n=t.url,r=t.playerHandles,o=E.isNotEmptyString(n)?n:(e=s.clickThrough,i={ASSETURI:a.options.src,CONTENTPLAYHEAD:0},e?w.parseURLMacro(e,i):null);r&&window._molSettings.disableClickThru||(u.trackClick(),r&&o&&(p.isFullscreen(),window.open(o,"_blank")),a.pauseAd(E.noop))}}),a.on("AdUserAcceptInvitation",function(){p.trigger({type:"trace.event",data:{event:"vpaid.AdUserAcceptInvitation"}}),p.trigger("vpaid.AdUserAcceptInvitation"),u.trackAcceptInvitation(),u.trackAcceptInvitationLinear()}),a.on("AdUserClose",function(){p.trigger({type:"trace.event",data:{event:"vpaid.AdUserClose"}}),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdUserClose",adVolume:p.volume()}),p.trigger("vpaid.AdUserClose"),u.trackClose(),u.trackCloseLinear()}),a.on("AdUserMinimize",function(){p.trigger({type:"trace.event",data:{event:"vpaid.AdUserMinimize"}}),p.trigger("vpaid.AdUserMinimize"),u.trackCollapse()}),a.on("AdError",function(){h.adFinished||(h.impressionTriggered||h.errorHasBeenTracked||(p.trigger({type:"trace.event",data:{event:"vpaid.AdError"}}),window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdError",adVolume:p.volume()}),p.trigger("vpaid.AdError"),u.trackErrorWithCode(901),h.errorHasBeenTracked=!0),T.showBigPlayButton(p,!1))}),a.on("AdVolumeChange",function(){p.trigger({type:"trace.event",data:{event:"vpaid.AdVolumeChange"}}),p.trigger("vpaid.AdVolumeChange");var i=p.volume();a.getAdVolume(function(t,e){i!==e&&(0===e&&0<i&&u.trackMute(),0<e&&0===i&&u.trackUnmute(),p.volume(e))})}),a.on("AdSizeChange",function(){p.vast&&p.vast.needSyncPlay&&(p.paused()!==p.tech_.el_.paused&&f!=p.tech_.el_.src&&(p.tech_.el_.paused?(window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdPaused",adVolume:p.volume()}),r(),T.showBigPlayButton(p,!0)):(window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdPlaying",adVolume:p.volume()}),n(),T.showBigPlayButton(p,!1))),p.vast.needSyncPlay=!1)});var v=A.bind(this,p,a,this.VIEW_MODE),g=E.throttle(v,100),m=this.settings.autoResize;m&&(k.addEventListener(window,"resize",g),k.addEventListener(window,"orientationchange",g)),p.on("vast.resize",v),p.on("vpaid.pauseAd",o),p.on("vpaid.resumeAd",d),p.on("stopAd",l),p.one("vpaid.adEnd",function(){p.off("vast.resize",v),p.off("vpaid.pauseAd",o),p.off("vpaid.resumeAd",d),p.off("stopAd",l),m&&(k.removeEventListener(window,"resize",g),k.removeEventListener(window,"orientationchange",g))}),t(null,a,s)},n.prototype._addSkipButton=function(n,t,e){function i(){k.remove(r),r=null}var r,o,a,s,d,l,c,u,p,f=this.player,h=this.tracker,v=this;if(!window._molSettings.disableSkippability)if(t.skipoffset&&E.isNumber(t.skipoffset))o=t.skipoffset/1e3,c=o,u=function(i){var e=window.document.createElement("div");return k.addClass(e,"vast-skip-button"),e.style.display="none",e.id="adSkipButton",e.onclick=function(t){if(k.hasClass(e,"enabled")&&n.getAdSkippableState(function(t,e){n.skipAd(E.noop),e||(h.trackSkip(),n.stopAd(E.noop),setTimeout(function(){i.trigger("vast.adsCancel")},1))}),T.showBigPlayButton(i,!1),void 0===window.Event.prototype.stopPropagation)return!1;t.stopPropagation()},e}(l=f),p=function(t,e){if(n.getAdDuration(function(t,e){0<e&&(a=e)}),n.getAdRemainingTime(function(t,e){s=e,!a&&0<s&&(a=s)}),!a||!s||a<0||s<0)return;var i=Math.ceil(e-(a-s));0<i&&!k.hasClass(t,"enabled")?t.innerHTML='<p class="vast-skip-button-text">'+window._molSettings.skipText.replace("%%TIME%%",E.toFixedDigits(i,2))+"</p>":k.hasClass(t,"enabled")||(k.addClass(t,"enabled"),t.innerHTML=window._molSettings.skipButtonText);if(!window.document.getElementById("iframeBackButton")){if(f.isFullscreen()&&E.isAndroid())return void(t.style.display="none");t.style.display="block"}}.bind(v,u,c),l.el().appendChild(u),d=setInterval(p,500),T.once(l,["vast.adEnd","vast.adsCancel"],function(){d&&(clearInterval(d),d=null),k.remove(u),u=null});else{var g=!1;window._molSettings&&window._molSettings.skippable&&(!1===window._molSettings.skippable.enabled&&(g=!0),t.duration&&window._molSettings.skippable.videoThreshold&&t.duration<window._molSettings.skippable.videoThreshold&&(g=!0)),g||(n.on("AdSkippableStateChange",function(){f.trigger("vpaid.AdSkippableStateChange"),n.getAdSkippableState(function(t,e){e?r||function(t){r=function(){var t=window.document.createElement("div");return k.addClass(t,"vast-skip-button"),k.addClass(t,"enabled"),t.innerHTML=window._molSettings.skipButtonText,t.id="adSkipButton",t.onclick=function(t){if(n.getAdSkippableState(function(t,e){e?n.skipAd(E.noop):(h.trackSkip(),n.stopAd(E.noop))}),void 0===window.Event.prototype.stopPropagation)return!1;t.stopPropagation()},t}(),t.el().appendChild(r)}(f):i()})}),T.once(f,["vast.adEnd","vast.adsCancel"],i))}e(null,n,t)},n.prototype._linkPlayerControls=function(t,e,i){var n,r,o,a,s,d,l=this;function c(){var t=n.muted()?0:n.volume();r.setAdVolume(t,u)}n=this.player,r=t,n.on("volumechange",c),r.on("AdVolumeChange",function(){window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdVolumeChange",adVolume:n.volume()}),n.trigger("vpaid.AdVolumeChange");var i=n.volume();r.getAdVolume(function(t,e){t?u(t):i!==e&&n.volume(e)})}),n.one("vpaid.adEnd",function(){n.off("volumechange",c)}),o=this.player,a=t,s=this.VIEW_MODE,d=A.bind(l,o,a,s),o.on("fullscreenchange",d),o.one("vpaid.adEnd",function(){o.off("fullscreenchange",d)}),i(null,t,e)},n.prototype._startAd=function(e,i,n){var r=this.player,o=e.adStarted;o&&(r.trigger("vast.adStart"),r.trigger({type:"trace.event",data:{event:"vpaid.AdStarted"}})),e.startAd(function(t){t||o||r.trigger("vast.adStart"),n(t,e,i)})},n.prototype._finishPlaying=function(i,n,r){function o(t){if(s.adFinished=!0,T.showBigPlayButton(a,!1),d){if(s.timeUpdateTimer){clearInterval(s.timeUpdateTimer),s.timeUpdateTimer=null;var e=document.getElementById("bc_time_display");e&&a.controlBar.getChild("currentTimeDisplay").el_.removeChild(e),y(a,!0)}a.controlBar.show(),a.tech_.el_.style.display="block"}r(t,i,n)}var a=this.player,s=this;i.on("AdStopped",function(){window.MoatApiReference&&window.MoatApiReference.dispatchEvent({type:"AdStopped",adVolume:a.volume()}),a.trigger("vpaid.AdStopped"),o(null)}),i.on("AdError",function(t){if(s.impressionTriggered)o(null);else{var e=t?t.message:"on VPAIDIntegrator, error while waiting for the adUnit to finish playing";o(new l(e))}});var d=this.needsShowPlayer},n.prototype._trackError=function(t,e){this.errorHasBeenTracked||(this.errorHasBeenTracked=!0,w.track(t.errorURLMacros,{ERRORCODE:e||901}))},e.exports=n},{"../../utils/async":36,"../../utils/consoleLogger":37,"../../utils/dom":38,"../../utils/mimetypes":40,"../../utils/playerUtils":41,"../../utils/utilityFunctions":43,"../vast/VASTError":19,"../vast/VASTResponse":21,"../vast/VASTTracker":22,"../vast/vastUtil":28,"./VPAIDAdUnitWrapper":29}],32:[function(t,e,i){"use strict";var r=document.createElement("div");e.exports=function(n){return{init:function(t,e){(e.el=r).className="vjs-black-poster",n.call(this,t,e);var i=t.getChild("posterImage");setTimeout(function(){i&&t&&t.el()&&t.el().insertBefore(r,i.el())},0)},el:function(){return r}}}},{}],33:[function(t,e,i){"use strict";var n=videojs.getComponent("Component"),r=t("./black-poster")(n);t("../../utils/utilityFunctions");videojs.registerComponent("BlackPoster",videojs.extend(n,r))},{"../../utils/utilityFunctions":43,"./black-poster":32}],34:[function(t,e,i){"use strict";var l=t("../ads/vast/VASTClient"),c=t("../ads/vast/VASTError"),m=t("../ads/vast/vastUtil"),y=t("../ads/vast/VASTIntegrator"),A=t("../ads/vpaid/VPAIDIntegrator"),w=t("../ads/icon/IconIntegrator"),u=t("../utils/async"),p=t("../utils/dom"),k=t("../utils/playerUtils"),T=t("../utils/utilityFunctions"),E=t("../utils/anVideoViewability"),b=t("../utils/consoleLogger");e.exports=function(t){function i(){h.trigger("vast.adsCancel"),v=!0,h.vast&&(h.vast.adsCancelled=!0)}function n(t){u.waterfall([e,r],t)}function e(t){s.getVASTResponse(g.adTagUrl?g.adTagUrl():g.adTagXML,t)}function r(e,i){function r(t){for(var e=h.controlBar.getChild("currentTimeDisplay").el_.children,i=0;i<e.length;i++)"bc_time_display"!=e[i].id&&(e[i].style.display=t?"":"none")}function n(){var t,e;if(window._molSettings.breakDuration&&h.duration()!=window._molSettings.breakDuration&&(h.duration()&&(window._molSettings.realVideoDuration=h.duration()),h.duration(window._molSettings.breakDuration)),window._molSettings.timeOffset){var i=document.getElementById("bc_time_display");i?(r(!1),i.style.display="block"):(i=document.createElement("div"),h.controlBar.getChild("currentTimeDisplay").el_.appendChild(i),i.id="bc_time_display",i.class="vjs-current-time-display",i["aria-live"]="off",r(!(i.innerHTML='<span class="vjs-control-text"></span>0:00')));var n=h.currentTime()+window._molSettings.timeOffset;i.childNodes[1].nodeValue=(t=parseInt(n+.5),e=parseInt(t/60),t-=60*e,e.toString()+":"+(9<t?"":"0")+t.toString())}}if(!v){if(window.MoatApiReference=null,e.ads&&0<e.ads.length&&e.ads[0].inLine&&e.ads[0].inLine.moat){var t={level1:e.ads[0].inLine.moat.advid,level2:e.ads[0].inLine.moat.cpgid,level3:e.ads[0].inLine.moat.cpid,level4:e.ads[0].inLine.moat.crid};e.ads[0].inLine.moat.site_id&&(t.slicer1=e.ads[0].inLine.moat.site_id),window.MoatApiReference=function(t,e,i,n,r){var o,a,s=document.createElement("script"),d=[];e={adData:{ids:e,duration:i,url:r},dispatchEvent:function(t){this.sendEvent?(d&&(d.push(t),t=d,d=!1),this.sendEvent(t)):d.push(t)}},i="_moatApi"+Math.floor(1e8*Math.random());try{a=(o=t.ownerDocument).defaultView||o.parentWindow}catch(t){o=document,a=window}return a[i]=e,s.type="text/javascript",t&&t.insertBefore(s,t.childNodes[0]||null),s.src="https://z.moatads.com/"+n+"/moatvideo.js#"+i,e}(h.el_,t,h.duration(),e.ads[0].inLine.moat.partnercode,h.currentSource().src)}window._molSettings.viewabilityTracking&&window._molSettings.viewabilityTracking.init(window._molSettings.viewability.contextId,h.duration(),h.el_.offsetWidth,h.el_.offsetHeight);var o,a,s,d=function(t){var e,i,n=t.mediaFiles;for(e=0,i=n.length;e<i;e++)if(m.isVPAID(n[e]))return!0;return!1}(e),l=d?new A(h,g):new y(h),c=!1;d?h.trigger("clearAdCancelTimeout"):h.vast.trackError=l._trackError,k.once(h,["vast.adStart","vast.adsCancel"],function(t){"vast.adStart"===t.type&&function(){if(window._molSettings.playsInBreak&&h.on("timeupdate",n),!c){e.icons&&0<e.icons.length&&new w(h).renderIcons(e.icons,i);var t=document.getElementsByClassName("vjs-next-button");t&&0<t.length&&((f=t[0]).style.display="none")}}()}),k.once(h,["vast.adEnd","vast.adsCancel"],function(){if(window._molSettings.playsInBreak&&(h.off("timeupdate",n),window._molSettings.timeOffset)){r(!0);var t=document.getElementById("bc_time_display");t&&(t.style.display="none")}f&&(f.style.display="",f=null),c=!0}),T.isIDevice()&&(o=3,s=a=0,h.on("timeupdate",p),h.on("ended",u),k.once(h,["vast.adEnd","vast.adsCancel","vast.adError"],function(){h.off("timeupdate",p),h.off("ended",u)})),h.vast.vastResponse=e,b.debug("calling adIntegrator.playAd() with vastResponse:",e),h.vast.adUnit=l.playAd(e,i),h.vast.VPAID=d}function u(){h.duration()-a>o&&(h.pause(!0),h.play(!0),h.currentTime(a))}function p(){var t=h.currentTime(),e=Math.abs(t-a);o<e?(2<=(s+=1)&&h.pause(!0),h.currentTime(a)):a=t}}function o(t,e){h.trigger({type:"vast.adError",error:t}),b.error("AD ERROR:",t.message,t,e),t&&402===t.code&&(h.vast&&h.vast.trackError?h.vast.trackError(t,h.vast.vastResponse):b.warn("WARNING: Cannot track ad start timeout error because VAST XML is not parsed yet")),i()}var a,f,h=this,s=new l({wrapperLimit:t.wrapperLimit}),v=!1,g=T.extend({},{timeout:500,iosPrerollCancelTimeout:2e3,adCancelTimeout:5e3,playAdAlways:!1,adsEnabled:!0,autoResize:!0,verbosity:0,playsInBreak:!1,skipText:"Skip in %%TIME%% seconds",skipButtonText:"Skip ad",initialPlayback:"auto",initialAudio:"on",disableClickThru:!1,firstPlay:!0},t||{}),d="";return h.bcinfo?d=h.bcinfo.playerId:h.options_&&h.options_["data-player"]&&(d=h.options_["data-player"]),b.setPlayerId(d+"-"+h.el_.id),T.isUndefined(g.adTagUrl)&&T.isDefined(g.url)&&(g.adTagUrl=g.url),T.isString(g.adTagUrl)&&(g.adTagUrl=T.echoFn(g.adTagUrl)),g.viewability&&g.viewability.config&&(g.viewabilityTracking=new E(h)),window._molSettings=g,window._timeoutIds=[],window.MoatApiReference=null,T.isDefined(g.adTagXML)&&!T.isFunction(g.adTagXML)?o(new c("on VideoJS VAST plugin, the passed adTagXML option does not contain a function")):T.isDefined(g.adTagUrl)||T.isFunction(g.adTagXML)?(b.setVerbosity(g.verbosity),g.playsInBreak||((a=k.getPlayerSnapshot(h)).playing=!0),"click"===g.initialPlayback&&k.showBigPlayButton(h,!0),k.prepareForAds(h),h.on("vast.contentEnd",function(){}),g.playAdAlways&&h.on("vast.contentEnd",function(){setTimeout(function(){h.trigger("vast.reset")},0)}),h.on("vast.firstPlay",function t(){function e(){k.once(h,["playing","vast.reset","vast.firstPlay"],function(t){"playing"===t.type&&(h.trigger("vast.contentStart"),k.once(h,["ended","vast.reset","vast.firstPlay"],function(t){"ended"===t.type&&h.trigger("vast.contentEnd")}))}),a&&(k.restorePlayerSnapshot(h,a),a=null)}function i(){setTimeout(function(){p.removeClass(h.el(),"vjs-vast-ad-loading"),h.loadingSpinner.el_.style.display="none"},100)}h.off("vast.firstPlay",t),h.vast.adsCancelled&&delete h.vast.adsCancelled,k.showBigPlayButton(h,!1),"off"===g.initialAudio&&(g.contentVolume={muted:h.muted(),volume:h.volume()},h.muted(!0)),k.removeNativePoster(h),k.once(h,["vast.adsCancel","vast.adEnd"],function(){k.showBigPlayButton(h,!1),h.vast&&h.vast.adUnit&&(h.vast.adUnit=null,h.vast.VPAID=null),window._molSettings.firstPlay=!1,e(),setTimeout(function(){h.trigger("adFinished")},0)}),u.waterfall([function(t){if(g.adsEnabled)return t(null);t(new c("Ads are not enabled"))},function(t){!T.isIPhone()||h.currentTime()<=g.iosPrerollCancelTimeout?(h.pause(),p.addClass(h.el(),"vjs-vast-ad-loading"),k.once(h,["vast.adStart","vast.adsCancel"],i),h.paused()?t(null):k.once(h,["playing"],function(){h.pause(),t(null)})):t(new c("video content has been playing before preroll ad"))},function(t){function e(){i&&(clearTimeout(i),i=null)}var i;v=!1,i=setTimeout(function(){i=null,o(new c("timeout while waiting for the video to start playing. You may need to increase adStartTimeout.",402)),k.showBigPlayButton(h,!1),h.vast.VPAID&&h.trigger("vpaid.adEnd")},g.adCancelTimeout),k.once(h,["vast.adStart","vast.adsCancel","clearAdCancelTimeout"],e),k.once(h,["vast.adError","vpaid.adEnd","vpaid.adError"],function(){e()}),t(null)},n],function(t,e){t?o(t,e):h.trigger("vast.adEnd")})}),h.on("vast.reset",function(){a=null,i()}),h.vast={isEnabled:function(){return g.adsEnabled},enable:function(){g.adsEnabled=!0},disable:function(){g.adsEnabled=!1}},h.vast):o(new c("on VideoJS VAST plugin, missing adTagUrl on options object"))}},{"../ads/icon/IconIntegrator":6,"../ads/vast/VASTClient":18,"../ads/vast/VASTError":19,"../ads/vast/VASTIntegrator":20,"../ads/vast/vastUtil":28,"../ads/vpaid/VPAIDIntegrator":31,"../utils/anVideoViewability":35,"../utils/async":36,"../utils/consoleLogger":37,"../utils/dom":38,"../utils/playerUtils":41,"../utils/utilityFunctions":43}],35:[function(t,e,i){t("./consoleLogger");e.exports=function(t){this.init=function(t,e,i,n){},this.invokeEvent=function(t){},this.isReady=!1}},{"./consoleLogger":37}],36:[function(t,e,i){var a=t("./utilityFunctions"),s={setImmediate:function(t){setTimeout(t,0)},iterator:function(i){var n=function(t){var e=function(){return i.length&&i[t].apply(null,arguments),e.next()};return e.next=function(){return t<i.length-1?n(t+1):null},e};return n(0)},waterfall:function(t,r){if(r=r||function(){},!a.isArray(t)){var e=new Error("First argument to waterfall must be an array of functions");return r(e)}if(!t.length)return r();var o=function(n){return function(t){if(t)r.apply(null,arguments),r=function(){};else{var e=Array.prototype.slice.call(arguments,1),i=n.next();i?e.push(o(i)):e.push(r),s.setImmediate(function(){n.apply(null,e)})}}};o(s.iterator(t))()},when:function(t,i){if(!a.isFunction(i))throw new Error("async.when error: missing callback argument");var n=a.isFunction(t)?t:function(){return!!t};return function(){var t=a.arrayLikeObjToArray(arguments),e=t.pop();return n.apply(null,t)?i.apply(this,arguments):(t.unshift(null),e.apply(null,t))}}};e.exports=s},{"./utilityFunctions":43}],37:[function(t,e,i){"use strict";function n(t){try{var e="";try{e=window.top.location.search}catch(t){try{e=window.location.search}catch(t){}}var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}catch(t){return""}}function r(t,e){var i=a;0<e.length&&"string"==typeof e[0]&&(s&&0<s.length&&(i+="-"+s),i+="]",i+="["+function(){var t="";try{var e=new Date;t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"."+e.getMilliseconds()}catch(t){}return t}()+"]",e[0]=i+e[0]),t.apply?t.apply(console,Array.prototype.slice.call(e)):t(Array.prototype.slice.call(e))}var o=0,a="[Nuevo-Plugin",s="",d={setPlayerId:function(t){s=t},setVerbosity:function(t){o=Math.max(t,o)},debug:function(){o<4||(void 0===console.debug?r(console.log,arguments):r(console.debug,arguments))},log:function(){o<3||r(console.log,arguments)},info:function(){o<2||r(console.info,arguments)},warn:function(){o<1||r(console.warn,arguments)},error:function(){r(console.error,arguments)}};"undefined"!=typeof console&&console.log||(d.debug=function(){},d.log=function(){},d.info=function(){},d.warn=function(){},d.error=function(){}),e.exports=d,function(){try{o="true"==n("ast_debug").toLowerCase()?4:0}catch(t){}}()},{}],38:[function(t,e,i){"use strict";var a=t("./utilityFunctions"),r={isVisible:function(t){return"hidden"!==window.getComputedStyle(t).visibility},isHidden:function(t){return"none"===window.getComputedStyle(t).display},isShown:function(t){return!r.isHidden(t)},hide:function(t){t.__prev_style_display_=t.style.display,t.style.display="none"},show:function(t){r.isHidden(t)&&(t.style.display=t.__prev_style_display_),t.__prev_style_display_=void 0},hasClass:function(t,e){var i,n,r;if(a.isNotEmptyString(e)){if(t.classList)return t.classList.contains(e);for(e=e||"",n=0,r=(i=a.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[]).length;n<r;n+=1)if(i[n]===e)return!0}return!1},addClass:function(t,e){var i;if(a.isNotEmptyString(e)){if(t.classList)return t.classList.add(e);i=a.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[],a.isString(e)&&a.isNotEmptyString(e.replace(/\s+/,""))&&(i.push(e),t.setAttribute("class",i.join(" ")))}},removeClass:function(t,e){var i;if(a.isNotEmptyString(e)){if(t.classList)return t.classList.remove(e);i=a.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];var n,r,o=[];if(a.isString(e)&&a.isNotEmptyString(e.replace(/\s+/,""))){for(n=0,r=i.length;n<r;n+=1)e!==i[n]&&o.push(i[n]);t.setAttribute("class",o.join(" "))}}},addEventListener:function(e,i,n){a.isArray(e)?a.forEach(e,function(t){r.addEventListener(t,i,n)}):a.isArray(i)?a.forEach(i,function(t){r.addEventListener(e,t,n)}):e.addEventListener?e.addEventListener(i,n,!1):e.attachEvent&&e.attachEvent("on"+i,n)},removeEventListener:function(e,i,n){a.isArray(e)?a.forEach(e,function(t){r.removeEventListener(t,i,n)}):a.isArray(i)?a.forEach(i,function(t){r.removeEventListener(e,t,n)}):e.removeEventListener?e.removeEventListener(i,n,!1):e.detachEvent?e.detachEvent("on"+i,n):e["on"+i]=null},dispatchEvent:function(t,e){t.dispatchEvent?t.dispatchEvent(e):t.fireEvent("on"+e.eventType,e)},isDescendant:function(t,e){for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1},getTextContent:function(t){return t.textContent||t.text},prependChild:function(t,e){return e.parentNode&&e.parentNode.removeChild(e),t.insertBefore(e,t.firstChild)},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},isDomElement:function(t){return t instanceof Element||parent&&parent.Element&&t instanceof parent.Element},click:function(t,e){r.addEventListener(t,"click",e)},once:function(e,i,n){r.addEventListener(e,i,function t(){n.apply(null,arguments),r.removeEventListener(e,i,t)})},getDimension:function(t){var e;return!a.isOldIE()&&t.getBoundingClientRect?{width:(e=t.getBoundingClientRect()).width,height:e.height}:{width:t.offsetWidth,height:t.offsetHeight}}};e.exports=r},{"./utilityFunctions":43}],39:[function(t,e,i){"use strict";function c(t){this.message="HttpRequest Error: "+(t||"")}function n(t){if(!p.isFunction(t))throw new c("Missing XMLHttpRequest factory method");this.createXhr=t}function r(){var t=new XMLHttpRequest;return"withCredentials"in t||(t=new XDomainRequest),t}var u=t("./urlUtils"),p=t("./utilityFunctions");(c.prototype=new Error).name="HttpRequest Error",n.prototype.run=function(t,e,n,i){function r(){n(-1,null,null,"")}var o,a;!function(t,e,i){if(!p.isString(t)||p.isEmptyString(t))throw new c("Invalid url '"+t+"'");if(!p.isFunction(e))throw new c("Invalid handler '"+e+"' for the http request");if(p.isDefined(i)&&!p.isObject(i))throw new c("Invalid options map '"+i+"'")}(e,n,i);var s,d,l=this.createXhr();i=i||{},o=p.isNumber(i.timeout)?i.timeout:0,l.open(t,u.urlParts(e).href,!0),i.headers&&(s=l,d=i.headers,p.forEach(d,function(t,e){p.isDefined(t)&&s.setRequestHeader(e,t)})),i.withCredentials&&(l.withCredentials=!0),l.onload=function(){var t,e,i;l.getAllResponseHeaders||(l.getAllResponseHeaders=function(){return null}),l.status||(l.status=200),p.isDefined(a)&&(clearTimeout(a),a=void 0),t=l.statusText||"",e="response"in l?l.response:l.responseText,i=1223===l.status?204:l.status,n(i,e,l.getAllResponseHeaders(),t)},l.onerror=r,l.onabort=r,l.send(),0<o&&(a=setTimeout(function(){l&&l.abort()},o))},n.prototype.get=function(t,r,e){this.run("GET",t,function(t,e,i,n){!function(t){return 200<=t&&t<300}(t)?r(new c(n),e,t,i,n):r(null,e,t,i,n)},e)};var o=new n(r);e.exports={http:o,HttpRequest:n,HttpRequestError:c,createXhr:r}},{"./urlUtils":42,"./utilityFunctions":43}],40:[function(t,e,i){"use strict";e.exports={html5:["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],flash:["application/x-shockwave-flash"]}},{}],41:[function(t,e,i){"use strict";var h=t("./dom"),v=t("./utilityFunctions"),o={};o.getPlayerSnapshot=function(t){var e=t.el().querySelector(".vjs-tech"),i={ended:t.ended(),src:t.currentSrc(),currentTime:t.currentTime(),type:t.currentType(),playing:!t.paused(),suppressedTracks:function(t){var e=t.remoteTextTracks?t.remoteTextTracks():[];e&&v.isArray(e.tracks_)&&(e=e.tracks_),v.isArray(e)||(e=[]);var i=[];return e.forEach(function(t){i.push({track:t,mode:t.mode}),t.mode="disabled"}),i}(t)};return i.ended&&(i.currentTime=t.duration()+1),e&&(i.nativePoster=e.poster,i.style=e.getAttribute("style")),i},o.restorePlayerSnapshot=function(e,i){var t,n=e.el().querySelector(".vjs-tech"),r=20;i.nativePoster&&(n.poster=i.nativePoster),"style"in i&&n.setAttribute("style",i.style||""),i.dockText&&(i.dockText.style.display="block"),e.one("contentloadedmetadata",function(){i.suppressedTracks.forEach(function(t){t.track.mode=t.mode})}),e.one("canplay",function t(){if(e.play(),!o.isReadyToResume(e)&&r--)setTimeout(t,50);else try{e.currentTime()!==i.currentTime?(i.playing&&e.one("seeked",function(){i.ended||e.play()}),e.currentTime(i.currentTime)):i.playing&&e.play()}catch(t){videojs.log.warn("Failed to resume the content after an advertisement",t)}}),t=setTimeout(function(){e.trigger("canplay")},1e3),e.one("canplay",function(){clearTimeout(t)}),e.src({src:i.src,type:i.type})},o.isReadyToResume=function(t){return v.isIE11()?1<t.readyState():1<t.readyState()||(void 0===t.seekable()||0<t.seekable().length)},o.prepareForAds=function(o){function a(){return o.vast&&o.vast.VPAID}function s(){return o.vast&&o.vast.adUnit}function t(){d()&&(window._molSettings.firstPlay=!1,o.trigger("vast.firstPlay"))}function e(){window._molSettings.firstPlay=!0,p.show(),i()}function d(){return window._molSettings.firstPlay}function i(){c&&(function(t){v.isObject(t)&&(o.volume(t.volume),o.muted(t.muted))}(c),c=null)}function n(){h.hasClass(p.el(),"vjs-hidden")||p.hide()}function r(){h.addClass(o.el(),"vjs-ad-playing")}function l(){o.off("play",t),o.off("vast.reset",e),o.off("vast.firstPlay",i),o.off("error",n),o.off("vast.adStart",n),o.off("vast.adsCancel",n),o.off("vast.adError",n),o.off("vast.adStart",r),o.off("vast.adEnd",l),o.off("vast.adsCancel",l),h.removeClass(o.el(),"vjs-ad-playing"),h.removeClass(o.controlBar.playToggle.el(),"vjs-ended"),u&&setTimeout(function(){u.style.removeProperty("display")},500)}var c,u,p=o.addChild("blackPoster");!function(){var i=o.play;o.play=function(t){var e=this;return d()?function(){v.isIPhone()||(c=c||{muted:o.muted(),volume:o.volume()},o.muted(!0)),i.apply(e,arguments)}():function(t){s()&&!t?o.vast.adUnit.resumeAd():a()||i.apply(e,arguments)}(t),this};var e=o.pause;o.pause=function(t){return s()&&!t?o.vast.adUnit.pauseAd():a()||e.apply(this,arguments),this};var n=o.paused;if(o.paused=function(t){return s()&&!t?o.vast.adUnit.isPaused():n.apply(this,arguments)},parent&&window!==parent&&videojs&&!videojs.getPlugins&&v.scriptLoadedInIframe()){var r=o.src;o.src=function(t){if(t&&!(t instanceof parent.Object))if(v.isIE11()){var e=new parent.Object;for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);t=e}else t=parent.Object.assign(new parent.Object,t);r.call(this,t)}}}(),o.on("play",t),o.on("vast.reset",e),o.on("vast.firstPlay",i),o.on("error",n),o.on("vast.adStart",n),o.on("vast.adsCancel",n),o.on("vast.adError",n),o.on("vast.adStart",r),o.on("vast.adEnd",l),o.on("vast.adsCancel",l);var f=document.getElementsByClassName("vjs-error-display");f&&0<f.length&&(u=f[0]).style.setProperty("display","none","important")},o.removeNativePoster=function(t){var e=t.el().querySelector(".vjs-tech");e&&e.removeAttribute("poster")},o.once=function(e,t,i){function n(){i.apply(null,arguments),t.forEach(function(t){e.off(t,n)})}t.forEach(function(t){e.on(t,n)})},o.showBigPlayButton=function(t,e){var i=t.bigPlayButton.el_;i&&(e?(i.style.display="block",i.style.zIndex=99999):(i.style.display="none",i.style.zIndex=""))},e.exports=o},{"./dom":38,"./utilityFunctions":43}],42:[function(t,e,i){"use strict";var n=t("./utilityFunctions"),r=document.createElement("a"),o=document.documentMode;e.exports={urlParts:function(t){var e=t;return o&&(r.setAttribute("href",e),e=r.href),r.setAttribute("href",e),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:n.isNotEmptyString(r.port)?r.port:80,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}},queryStringToObj:function(t,r){var e,o;return r=n.isFunction(r)?r:function(){return!0},e=(t=t.trim().replace(/^\?/,"")).split("&"),o={},n.forEach(e,function(t){var e,i,n;""!==t&&(i=(e=t.split("="))[0],n=e[1],r(i,n)&&(o[i]=n))}),o},objToQueryString:function(t){var i=[];return n.forEach(t,function(t,e){i.push(e+"="+t)}),i.join("&")}}},{"./utilityFunctions":43}],43:[function(t,e,i){"use strict";function o(t){return null===t}function a(t){return"object"==typeof t}function s(t){return"function"==typeof t}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(){return/(edge)\/((\d+)?[\w\.]+)/i.test(u._UA)}var r=/[A-Z]/g,l=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i,c=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,u={_UA:navigator.userAgent,noop:function(){},isNull:o,isDefined:function(t){return void 0!==t},isUndefined:function(t){return void 0===t},isObject:a,isFunction:s,isNumber:function(t){return"number"==typeof t},isWindow:function(t){return u.isObject(t)&&t.window===t},isArray:d,isArrayLike:function(t){if(null===t||u.isWindow(t)||u.isFunction(t)||u.isUndefined(t))return!1;var e=t.length;return!(1!==t.nodeType||!e)||(u.isString(t)||u.isArray(t)||0===e||"number"==typeof e&&0<e&&e-1 in t)},isString:function(t){return"string"==typeof t},isEmptyString:function(t){return u.isString(t)&&0===t.length},isNotEmptyString:function(t){return u.isString(t)&&0!==t.length},arrayLikeObjToArray:function(t){return Array.prototype.slice.call(t)},forEach:function t(e,i,n){var r,o;if(e)if(s(e))for(r in e)"prototype"===r||"length"===r||"name"===r||e.hasOwnProperty&&!e.hasOwnProperty(r)||i.call(n,e[r],r,e);else if(d(e)){var a="object"!=typeof e;for(r=0,o=e.length;r<o;r++)(a||r in e)&&i.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==t)e.forEach(i,n,e);else for(r in e)e.hasOwnProperty(r)&&i.call(n,e[r],r,e);return e},snake_case:function(t,i){return i=i||"_",t.replace(r,function(t,e){return(e?i:"")+t.toLowerCase()})},isValidEmail:function(t){return!!u.isString(t)&&l.test(t.trim())},extend:function t(e){var i,n,r;for(n=1;n<arguments.length;n++)for(r in i=arguments[n])i.hasOwnProperty(r)&&(a(e[r])&&!o(e[r])&&a(i[r])?e[r]=t({},e[r],i[r]):e[r]=i[r]);return e},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},decapitalize:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},transformArray:function(t,n){var r=[];return t.forEach(function(t,e){var i=n(t,e);u.isDefined(i)&&r.push(i)}),r},toFixedDigits:function(t,e){var i=t+"";if(e=u.isNumber(e)?e:0,t=u.isNumber(t)?t:parseInt(t,10),!u.isNumber(t)||isNaN(t))return"NaN";for(i=t+"";i.length<e;)i="0"+i;return i},throttle:function(e,i){var n=(new Date).getTime()-(i+1);return function(){var t=(new Date).getTime();i<=t-n&&(n=t,e.apply(this,arguments))}},debounce:function(t,e){var i;return function(){i&&clearTimeout(i),i=setTimeout(function(){t.apply(this,arguments),i=void 0},e)}},treeSearch:function t(e,i,n){for(var r=i(e),o=0;o<r.length;o++){if(n(r[o]))return r[o];var a=t(r[o],i,n);if(a)return a}},echoFn:function(t){return function(){return t}},isISO8601:function(t){return u.isNumber(t)&&(t+=""),!!u.isString(t)&&c.test(t.trim())},isOldIE:function(){var t=u.getInternetExplorerVersion(navigator);return-1!==t&&t<10},isIE11:function(){return 0<=navigator.userAgent.search(/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i)},getInternetExplorerVersion:function(t){var e=-1;if("Microsoft Internet Explorer"==t.appName){var i=t.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(i);null!==n&&(e=parseFloat(n[1]))}return e},isIDevice:function(){return/iP(hone|ad)/.test(u._UA)},isMobile:function(){return/iP(hone|ad|od)|Android|Windows Phone/.test(u._UA)},isIPhone:function(){return/iP(hone|od)/.test(u._UA)},isAndroid:function(){return/Android/.test(u._UA)},isEdge:n,scriptLoadedInIframe:function(){var t=document.documentElement.classList;return!(t&&t.contains("bc-iframe")&&n())}};e.exports=u},{}],44:[function(t,e,i){"use strict";var l=t("./utilityFunctions"),c={};c.strToXMLDoc=function(t){if(void 0!==window.DOMParser)return function(e){var t,i=new DOMParser;try{if(function(t){try{var e=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===e?0<t.getElementsByTagName("parsererror").length:0<t.getElementsByTagNameNS(e,"parsererror").length}catch(t){}}(t=i.parseFromString(e,"application/xml"))||l.isEmptyString(e))throw new Error}catch(t){throw new Error("xml.strToXMLDOC: Error parsing the string: '"+e+"'")}return t}(t);var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.loadXML(t),e},c.parseText=function(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):l.isISO8601(t)?new Date(t):t.trim()},c.JXONTree=function(t){var e=c.parseText;if(t.documentElement)return new c.JXONTree(t.documentElement);if(t.hasChildNodes()){for(var i,n,r,o="",a=0;a<t.childNodes.length;a++)3==((i=t.childNodes.item(a)).nodeType-1|1)?o+=3===i.nodeType?i.nodeValue.trim():i.nodeValue:1!==i.nodeType||i.prefix||(n=l.decapitalize(i.nodeName),r=new c.JXONTree(i),this.hasOwnProperty(n)?(this[n].constructor!==Array&&(this[n]=[this[n]]),this[n].push(r)):this[n]=r);o&&(this.keyValue=e(o))}if(void 0===t.hasAttributes?0<t.attributes.length:t.hasAttributes())for(var s,d=0;d<t.attributes.length;d++)s=t.attributes.item(d),this["@"+l.decapitalize(s.name)]=e(s.value.trim())},c.JXONTree.prototype.attr=function(t){return this["@"+l.decapitalize(t)]},c.toJXONTree=function(t){var e=c.strToXMLDoc(t);return new c.JXONTree(e)},c.keyValue=function(t){if(t)return t.keyValue},c.attr=function(t,e){if(t)return t["@"+l.decapitalize(e)]},c.encode=function(t){if(l.isString(t))return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},c.decode=function(t){if(l.isString(t))return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},e.exports=c},{"./utilityFunctions":43}],45:[function(t,e,i){"use strict";var n=window.videojs||{getComponent:function(){},extend:function(){},registerComponent:function(){},registerPlugin:function(){}};window._molSettings=null,t("./plugin/components/black-poster_5");var r=t("./utils/consoleLogger");r.log("VastVpaid  plugin version 4.0.1");var o=t("./plugin/videojs.vast.vpaid");if(n.registerPlugin)n.getPlugins().vastClient||n.registerPlugin("vastClient",o);else if(n.Player)n.Player.prototype.vastClient||n.plugin("vastClient",o);else if(n.plugin)try{n.plugin("vastClient",o)}catch(t){r.log("*** ERROR: Unable to register VastVpaid plugin with VideoJS!")}parent&&window!==parent&&(window.bc_vastClientFunc=o)},{"./plugin/components/black-poster_5":33,"./plugin/videojs.vast.vpaid":34,"./utils/consoleLogger":37}]},{},[45]);