/*! @name videojs-errors @version 4.3.2 @license Apache-2.0 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("video.js"),require("global/document")):"function"==typeof define&&define.amd?define(["video.js","global/document"],r):(e=e||self).videojsErrors=r(e.videojs,e.document)}(this,(function(e,r){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r;var o=e.getComponent("Flash"),n=!e.browser.IS_IPHONE,i=e.registerPlugin||e.plugin,t={header:"",code:"",message:"",timeout:45e3,dismiss:n,errors:{1:{type:"MEDIA_ERR_ABORTED",headline:"The video download was cancelled"},2:{type:"MEDIA_ERR_NETWORK",headline:"The video connection was lost, please confirm you are connected to the internet"},3:{type:"MEDIA_ERR_DECODE",headline:"The video is bad or in a format that cannot be played on your browser"},4:{type:"MEDIA_ERR_SRC_NOT_SUPPORTED",headline:"This video is either unavailable or not supported in this browser"},5:{type:"MEDIA_ERR_ENCRYPTED",headline:"The video you are trying to watch is encrypted and we do not know how to decrypt it"},unknown:{type:"MEDIA_ERR_UNKNOWN",headline:"An unanticipated problem was encountered, check back soon and try again"},"-1":{type:"PLAYER_ERR_NO_SRC",headline:"No video has been loaded"},"-2":{type:"PLAYER_ERR_TIMEOUT",headline:"Could not download the video"},PLAYER_ERR_DOMAIN_RESTRICTED:{headline:"This video is restricted from playing on your current domain"},PLAYER_ERR_IP_RESTRICTED:{headline:"This video is restricted at your current IP address"},PLAYER_ERR_GEO_RESTRICTED:{headline:"This video is restricted from playing in your current geographic region"},FLASHLS_ERR_CROSS_DOMAIN:{headline:"The video could not be loaded: crossdomain access denied."}}},s=function n(i,s){var a,d,l,c=[],u=function(r){s.errors=e.mergeOptions(s.errors,r),Object.keys(s.errors).forEach((function(e){var r=s.errors[e];r.type||(r.type=e)}))};u();var f=function(){i.clearTimeout(d),l&&(l=!1,i.removeClass("vjs-waiting")),d=i.setTimeout((function(){i.error()||i.paused()||i.ended()||(l=!0,i.addClass("vjs-waiting"))}),1e3),i.clearTimeout(a),a=i.setTimeout((function(){i.error()||i.paused()||i.ended()||i.error({code:-2,type:"PLAYER_ERR_TIMEOUT"})}),s.timeout),i.error()&&-2===i.error().code&&i.error(null)},h=function(){for(var e;c.length;)e=c.shift(),i.off(e[0],e[1]);i.clearTimeout(a),i.clearTimeout(d)},p=function(){var e,r,o,n=0;h(),f(),e=["timeupdate","adtimeupdate"],r=function(){var e=i.currentTime();e!==n&&(n=e,f())},o=function(){if(!i.error()){var e=i.$(".vjs-tech");if(e&&"application/x-shockwave-flash"===e.type&&!e.vjs_getProperty)return void i.error({code:-2,type:"PLAYER_ERR_TIMEOUT"});if(i.paused())return f();if(i.ended())return f()}r.call(this)},i.on(e,o),c.push([e,o])},v=function(){i.currentSrc()||i.error({code:-1,type:"PLAYER_ERR_NO_SRC"})},E=function(){var n="",t=i.error(),a=r.createElement("div"),d="";if(t){if((t=e.mergeOptions(t,s.errors[t.code||t.type||0])).message&&(n='<div class="vjs-errors-details">'+i.localize("Technical details")+'\n        : <div class="vjs-errors-message">'+i.localize(t.message)+"</div>\n        </div>"),4===t.code&&o&&!o.isSupported())n+='<span class="vjs-errors-flashmessage">'+i.localize("If you are using an older browser please try upgrading or installing Flash.")+"</span>";var l=i.getChild("errorDisplay");if(a.className="vjs-errors-dialog",a.id="vjs-errors-dialog",d='<div class="vjs-errors-content-container">\n      <h2 class="vjs-errors-headline">'+this.localize(t.headline)+'</h2>\n        <div class="vjs-errors-code"><b>'+this.localize("Error Code")+":</b> "+(t.type||t.code)+"</div>\n        "+n+"\n      </div>",l.closeable(!("dismiss"in t)||t.dismiss)){d+='<div class="vjs-errors-ok-button-container">\n          <button class="vjs-errors-ok-button">'+this.localize("OK")+"</button>\n        </div>",a.innerHTML=d,l.fillWith(a),l.contentEl().firstChild.appendChild(l.getChild("closeButton").el());var c=l.el().querySelector(".vjs-errors-ok-button");i.on(c,"click",(function(){l.close()}))}else a.innerHTML=d,l.fillWith(a);(i.currentWidth()<=600||i.currentHeight()<=250)&&l.addClass("vjs-xs"),l.one("modalclose",(function(){return i.error(null)}))}},R=function e(){h(),i.removeClass("vjs-errors"),i.off("play",p),i.off("play",v),i.off("dispose",e),i.off(["aderror","error"],E)},m=function(r){R(),n(i,e.mergeOptions(t,r))};m.extend=function(e){return u(e)},m.getAll=function(){return e.mergeOptions(s.errors)},m.timeout=function(e){if(void 0===e)return s.timeout;e!==s.timeout&&(s.timeout=e,i.paused()||p())},m.disableProgress=function(){},i.on("play",p),i.on("play",v),i.on("dispose",R),i.on(["aderror","contenterror","error"],E),i.ready((function(){i.addClass("vjs-errors")})),i.paused()||p(),m.VERSION="4.3.2",i.errors=m},a=function(r){s(this,e.mergeOptions(t,r))};return["extend","getAll"].forEach((function(r){a[r]=function(){e.log.warn("The errors."+r+"() method is not available until the plugin has been initialized!")}})),a.VERSION="4.3.2",i("errors",a),a}));
